var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,a=(e,a)=>{for(var i in a||(a={}))t.call(a,i)&&o(e,i,a[i]);if(r)for(var i of r(a))n.call(a,i)&&o(e,i,a[i]);return e},i=(e,o)=>{var a={};for(var i in e)t.call(e,i)&&o.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&r)for(var i of r(e))o.indexOf(i)<0&&n.call(e,i)&&(a[i]=e[i]);return a};import{S as s,i as c,s as u,e as l,c as f,a as p,d as h,o as d,H as m,f as g,g as v,n as y,t as b,b as w,h as _,j as S,l as A,I as j,J as O,K as k,C as E,x as C,D as I,w as x,L as M,M as R,N as P,p as $,q as N,r as T,y as L,k as U,O as z,G as F,P as D}from"../chunks/index-21a01d0c.js";function B(e){let t,r,n,o,a,i,s,c,u;return{c(){t=l("div"),r=l("div"),n=l("div"),o=l("div"),a=l("div"),i=l("div"),s=l("div"),c=l("div"),u=l("div"),this.h()},l(e){t=f(e,"DIV",{class:!0,style:!0});var l=p(t);r=f(l,"DIV",{class:!0}),p(r).forEach(h),n=f(l,"DIV",{class:!0}),p(n).forEach(h),o=f(l,"DIV",{class:!0}),p(o).forEach(h),a=f(l,"DIV",{class:!0}),p(a).forEach(h),i=f(l,"DIV",{class:!0}),p(i).forEach(h),s=f(l,"DIV",{class:!0}),p(s).forEach(h),c=f(l,"DIV",{class:!0}),p(c).forEach(h),u=f(l,"DIV",{class:!0}),p(u).forEach(h),l.forEach(h),this.h()},h(){d(r,"class","svelte-17wq96w"),d(n,"class","svelte-17wq96w"),d(o,"class","svelte-17wq96w"),d(a,"class","svelte-17wq96w"),d(i,"class","svelte-17wq96w"),d(s,"class","svelte-17wq96w"),d(c,"class","svelte-17wq96w"),d(u,"class","svelte-17wq96w"),d(t,"class","lds-spinner svelte-17wq96w"),m(t,"--size",e[0]+"px")},m(e,l){g(e,t,l),v(t,r),v(t,n),v(t,o),v(t,a),v(t,i),v(t,s),v(t,c),v(t,u)},p(e,[r]){1&r&&m(t,"--size",e[0]+"px")},i:y,o:y,d(e){e&&h(t)}}}function q(e,t,r){let{size:n="40"}=t;return e.$$set=e=>{"size"in e&&r(0,n=e.size)},[n]}class V extends s{constructor(e){super(),c(this,e,q,B,u,{size:0})}}var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function H(e){var t={exports:{}};return e(t,t.exports),t.exports
/*!
 * jskos-tools v1.0.17
 * Copyright (c) 2018 Verbundzentrale des GBV (VZG)
 * @license MIT
 *
 * For dependency license information, please see ./dist/jskos-tools.js.LICENSES.txt.
 */}var K=H((function(e,t){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return i(e)||s(e)||c(e)||l()}function i(e){if(Array.isArray(e))return u(e)}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}var p=function(e){var t,r,n,o,a,i,s,c,u,l=function(e,t){return e<<t|e>>>32-t},f=function(e){var t,r="";for(t=7;t>=0;t--)r+=(e>>>4*t&15).toString(16);return r},p=new Array(80),h=1732584193,d=4023233417,m=2562383102,g=271733878,v=3285377520,y=(e=unescape(encodeURIComponent(e))).length,b=[];for(r=0;r<y-3;r+=4)n=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),b.push(n);switch(y%4){case 0:r=2147483648;break;case 1:r=e.charCodeAt(y-1)<<24|8388608;break;case 2:r=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:r=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(b.push(r);b.length%16!=14;)b.push(0);for(b.push(y>>>29),b.push(y<<3&4294967295),t=0;t<b.length;t+=16){for(r=0;r<16;r++)p[r]=b[t+r];for(r=16;r<=79;r++)p[r]=l(p[r-3]^p[r-8]^p[r-14]^p[r-16],1);for(o=h,a=d,i=m,s=g,c=v,r=0;r<=19;r++)u=l(o,5)+(a&i|~a&s)+c+p[r]+1518500249&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;for(r=20;r<=39;r++)u=l(o,5)+(a^i^s)+c+p[r]+1859775393&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;for(r=40;r<=59;r++)u=l(o,5)+(a&i|a&s|i&s)+c+p[r]+2400959708&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;for(r=60;r<=79;r++)u=l(o,5)+(a^i^s)+c+p[r]+3395469782&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;h=h+o&4294967295,d=d+a&4294967295,m=m+i&4294967295,g=g+s&4294967295,v=v+c&4294967295}return(u=f(h)+f(d)+f(m)+f(g)+f(v)).toLowerCase()};function h(e){return e.map((function(e){return e&&e.uri})).filter(Boolean)}function d(e){return["memberSet","memberList","memberChoice"].find((function(t){return e[t]}))}function m(e){var t=d(e),r=e[t]?h(e[t]):[];return o({},r.length>1?t:"memberSet",r.map((function(e){return{uri:e}})))}function g(e){for(var t=e.from,r=e.to,n=e.type,o={from:m(t||{}),to:m(r||{}),type:[n&&n[0]||"http://www.w3.org/2004/02/skos/core#mappingRelation"]},a=0,i=["from","to"];a<i.length;a++){var s=i[a];if(0==(o[s][d(o[s])]||[]).length){var c=e[s+"Scheme"];c&&c.uri&&(o[s+"Scheme"]={uri:c.uri})}}return o}function v(e){var t,r=[e.from,e.to].filter(Boolean).map((function(e){return h(e[d(e)]||[])}));return(t=[]).concat.apply(t,a(r)).sort()}function y(e){var t=JSON.stringify(g(e),["from","fromScheme","to","toScheme","type","memberSet","memberList","memberChoice","uri"]);return"urn:jskos:mapping:content:"+p(t+"\n")}function b(e){var t=JSON.stringify(v(e));return"urn:jskos:mapping:members:"+p(t+"\n")}function w(e){var t=(e.identifier||[]).filter((function(e){return!e.startsWith("urn:jskos:mapping:")})).concat([b(e),y(e)]).sort();return Object.assign({},e,{identifier:t})}function _(e,t,r){return e=e&&w(e),t=t&&w(t),(e&&e.identifier?e.identifier.find((function(e){return e.startsWith(r)})):null)==(t&&t.identifier?t.identifier.find((function(e){return e.startsWith(r)})):null)}function S(e,t){return _(e,t,"urn:jskos:mapping:content:")}function A(e,t){return _(e,t,"urn:jskos:mapping:members:")}var j={mappingContent:g,mappingMembers:v,mappingContentIdentifier:y,mappingMembersIdentifier:b,addMappingIdentifiers:w,compareMappings:S,compareMappingContent:S,compareMappingMembers:A};function O(t,r,n){var o=Array.prototype.slice,a="function"==typeof Object.keys?Object.keys:function(e){var t=[];for(var r in e)t.push(r);return t},i=function(t,r){return t===r||(t instanceof Date&&r instanceof Date?t.getTime()===r.getTime():"object"!=e(t)&&"object"!=e(r)?t==r:u(t,r))};function s(e){return null==e}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function u(e,t){if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(c(e))return!!c(t)&&(e=o.call(e),t=o.call(t),i(e,t));try{var r,u,l=a(e),f=a(t)}catch(h){return!1}if(l.length!=f.length)return!1;for(l.sort(),f.sort(),u=l.length-1;u>=0;u--)if(l[u]!=f[u])return!1;for(u=l.length-1;u>=0;u--)if(r=l[u],n){var p=n(e[r],t[r],r);if(void 0===p&&(p=O(e[r],t[r])),!p)return!1}else if(!i(e[r],t[r]))return!1;return!0}return i(t,r)}var k={get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=function(r){return String.prototype.split.call(t,r).filter(Boolean).reduce((function(e,t){return null!=e?e[t]:e}),e)},o=n(/[,[\]]+?/)||n(/[,[\].]+?/);return void 0===o||o===e?r:o},pick:function(e,t){return t.reduce((function(t,r){return e&&e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})},forOwn:function(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},isEqualWith:O,intersection:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))},isObject:function(t){return"object"===e(t)&&null!==t},isString:function(e){return!(!e||"string"!=typeof e.valueOf())},union:function(e,t){return a(new Set([].concat(a(e),a(t))))},unionWith:function(e,t,r){return[].concat(a(e),a(t)).reduce((function(e,t){return-1!==e.findIndex((function(e){return r(e,t)}))||e.push(t),e}),[])},omitMod:function(e,t){var r,n=f(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;"string"==typeof o&&(o=o.split("."));for(var a=0;a<o.length-1;a++)e=e[o[a]];delete e[o.pop()]}}catch(i){n.e(i)}finally{n.f()}}},E=[{RELEVANCE:"very high",broader:[{uri:"http://www.w3.org/2004/02/skos/core#closeMatch"}],definition:{de:["gleiche Bedeutung"],en:["same meaning"]},notation:["="],prefLabel:{ar:"تطابق تام",be:"дакладная адпаведнасць","be-tarask":"дакладная адпаведнасьць",ca:"equivalència exacta",cs:"přesná shoda",da:"exact match",de:"exakte Übereinstimmung",en:"exact match",eo:"ekzakta ekvivalento",es:"equivalencia exacta",fi:"vastaava käsite",fr:"équivalence exacte",he:"התאמה מדויקת",hu:"pontos egyezés",id:"sama persis",it:"corrispondenza esatta",ja:"完全一致",mk:"точно совпаѓање",ms:"padanan tepat",nb:"eksakt samsvar",nl:"exacte match",nn:"eksakt samsvar",pl:"dokładne dopasowanie",pt:"correspondência exata",ro:"echivalentul exact",ru:"точное соответствие",sq:"përputhje e përpiktë",sr:"тачно подударање",sv:"exakt träff",uk:"точна відповідність",zh:"精確匹配","zh-hans":"精确匹配","zh-hant":"精確匹配"},SHORT:"exact",uri:"http://www.w3.org/2004/02/skos/core#exactMatch"},{RELEVANCE:"high",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["in etwa gleiche Bedeutung"],en:["same general idea but not fully identical meaning"]},notation:["≈"],prefLabel:{ar:"تطابق قريب","be-tarask":"блізкая адпаведнасьць",ca:"equivalència inexacta",de:"hohe Übereinstimmung",en:"close match",eo:"proksima kongruaĵo",es:"equivalencia inexacta",fi:"lähes vastaava käsite",fr:"quasi-équivalence",he:"התאמה קרובה",it:"corrispondenza stretta",mk:"блиско совпаѓање",nb:"nært samsvar",nl:"nabije match",nn:"nært samsvar",pl:"częściowe dopasowanie",pt:"correspondência próxima",ru:"близкое соответствие",sr:"блиско поклапање",sv:"nära matchning","zh-hans":"高度匹配"},SHORT:"close",uri:"http://www.w3.org/2004/02/skos/core#closeMatch"},{RELEVANCE:"medium",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["umfassendere Bedeutung"],en:["broader meaning"]},notation:[">"],prefLabel:{"be-tarask":"шырокая адпаведнасьць",de:"allgemeinere Bedeutung",en:"broad match",eo:"malstrikta kongruo",fi:"vastaava laajempi käsite",he:"התאמה רחבה",it:"corrispondenza generica",ja:"部分一致",mk:"пошироко совпаѓање",nb:"bredere samsvar",nl:"brede match",nn:"breitt samsvar",pl:"dopasowanie pojęcia o szerszym znaczeniu","pt-br":"correspondência genérica",ru:"более широкое соответствие",sv:"bred träff","zh-hans":"广泛匹配"},related:[{uri:"http://www.w3.org/2004/02/skos/core#narrowMatch"}],SHORT:"broad",uri:"http://www.w3.org/2004/02/skos/core#broadMatch"},{RELEVANCE:"medium",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["umfassendere Bedeutung"],en:["more specific meaning"]},notation:["<"],prefLabel:{"be-tarask":"вузкая адпаведнасьць",de:"spezifischere Bedeutung",en:"narrow match",eo:"strikta kongruo",fi:"vastaava suppeampi käsite",he:"התאמה צרה",mk:"потесно совпаѓање",nb:"smalere samsvar",nl:"nauwe match",nn:"snevert samsvar",pl:"dopasowanie pojęcia o węższym znaczeniu","pt-br":"correspondência aproximada",ru:"более узкое соответствие",sv:"smal träff","zh-hans":"有限匹配"},related:[{uri:"http://www.w3.org/2004/02/skos/core#broadMatch"}],SHORT:"narrow",uri:"http://www.w3.org/2004/02/skos/core#narrowMatch"},{RELEVANCE:"low",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["assoziative Verknüpfung unterschiedlicher Bedeutungen"],en:["associative link between meanings"]},notation:["~"],prefLabel:{"be-tarask":"зьвязаная адпаведнасьць",de:"verwandte Bedeutung",en:"related match",he:"התאמה קשורה",it:"corrispondenza correlata",mk:"поврзано совпаѓање",nb:"relatert samsvar",nl:"gerelateerde match",pl:"dopasowanie pojęcia o powiązanym znaczeniu",ru:"ассоциативное соответствие","zh-hans":"关联匹配"},SHORT:"related",uri:"http://www.w3.org/2004/02/skos/core#relatedMatch"},{RELEVANCE:"generic",definition:{de:["unbekannter Bedeutungszusammenhang"],en:["unknown type of link between meanings"]},notation:["→"],prefLabel:{ar:"نوع علاقة التطبيق",be:"характэрная адносіна адлюстравання","be-tarask":"характэрная адносіна адлюстраваньня",ca:"relació de mapatge",de:"allgemeine Mapping-Relation",en:"SKOS generic mapping relation",he:"יחס מיפוי כללי",id:"relasi pemetaan",mk:"пресликувачки однос",nb:"generell mappingrelasjon","pt-br":"relação genérica de mapeamento",sr:"релација мапирања",sv:"mappnings relation",zh:"映射關係","zh-hant":"映射關係"},SHORT:"",uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],C={Concept:{type:["http://www.w3.org/2004/02/skos/core#Concept"]},ConceptScheme:{type:["http://www.w3.org/2004/02/skos/core#ConceptScheme"]},ConceptMapping:{type:E.map((function(e){return e.uri}))},ConceptOccurrence:{type:["http://purl.org/cld/cdtype/CatalogueOrIndex"]},Registry:{type:["http://www.w3.org/ns/dcat#Catalog"]},Distribution:{type:["http://www.w3.org/ns/dcat#Distribution"]},Concordance:{type:["http://rdfs.org/ns/void#Linkset","http://rdf-vocabulary.ddialliance.org/xkos#Correspondence"]},Resource:{},Item:{},Annotation:{type:["Annotation","http://www.w3.org/ns/oa#Annotation"]}},I=Object.keys(C).reduce((function(e,t){var r,n=f(C[t].type||[]);try{for(n.s();!(r=n.n()).done;)e[r.value]=t}catch(o){n.e(o)}finally{n.f()}return e}),{});function x(t){var r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof t&&t)t in I?r=I[t]:(t=t.toLowerCase().replace(/s$/,""),r=Object.keys(C).find((function(e){var r=e.toLowerCase();if(r===t||r==="concept"+t)return!0})));else if("object"===e(t)&&t.type){var o,a=f(Array.isArray(t.type)?t.type:[t.type]);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(i in I){r=I[i];break}}}catch(s){a.e(s)}finally{a.f()}}return n&&r?r.toLowerCase().replace(/^concept(.+)/,"$1"):r}var M={objectTypes:C,guessObjectType:x},R=/[\\^$.*+?()[\]{}|]/g,P=function(e){return e.replace(R,"\\$&")},$=/[% ]/,N=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t(this,e),Object.assign(this,r),this.notationPattern||(this.notationPattern=".+"),!this.uriPattern&&this.namespace){this.uriPattern="^"+P(this.namespace);var n=this.notationPattern.replace($,encodeURI);this.uriPattern+="("+n+")$"}this.NOTATION_REGEX=RegExp("^"+this.notationPattern+"$"),this.uriPattern&&(this.URI_REGEX=RegExp(this.uriPattern))}return n(e,[{key:"isValidNotation",value:function(e){return this.NOTATION_REGEX.exec(e)}},{key:"notationFromUri",value:function(e){if(this.URI_REGEX){var t=this.URI_REGEX.exec(e);if(t)return decodeURI(t[1])}}},{key:"uriFromNotation",value:function(e){if(this.uriPattern)return e=encodeURI(e),this.uriPattern.replace(/^\^|\$$/g,"").replace(/\\/g,"").replace(/\(.*\)/,e)}},{key:"conceptFromUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.notationFromUri(e);if(void 0!==r){var n={uri:e,notation:[r]};return t.inScheme&&(n.inScheme=[{uri:this.uri}]),t.topConcept&&(n.topConceptOf=[{uri:this.uri}]),n}}},{key:"conceptFromNotation",value:function(e,t){if(this.isValidNotation(e))return this.conceptFromUri(this.uriFromNotation(e),t)}}]),e}(),T={store:null,path:"",defaults:["en"],getLanguages:L,selectLanguage:U};function L(){return k.get(T.store,T.path)||T.defaults}function U(e){if(!e)return null;var t,r=f(L());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e[n])return n}}catch(s){r.e(s)}finally{r.f()}for(var o=0,a=Object.keys(e);o<a.length;o++){var i=a[o];if("-"!=i)return i}return null}var z=T,F=function(e){return/^[A-Z]*$/.test(e)},D=function(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e)},B=function(e){return(e instanceof Array?e:[e]).forEach((function(e){e["@context"]="https://gbv.github.io/jskos/context.json"})),e},q=function t(r){return Object.keys(r).forEach((function(n){F(n)||n.startsWith("_")?delete r[n]:null!=r[n]&&"object"===e(r[n])&&(r[n]=t(r[n]))})),r},V=q,W=function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n=n.concat(["ancestors","narrower","broader","mappings","memberList","TOPCONCEPTS","MAPPINGS","PROVIDER"]);var a=Array.isArray(r)?[]:{};for(var i in r)if(!o||"_"!=i[0])if(n.includes(i)){if(r[i]&&Array.isArray(r[i])){r[i].length>0?a[i]=[null]:a[i]=[];continue}a[i]=null}else if("inScheme"!=i)null!=r[i]&&"object"==e(r[i])?a[i]=t(r[i]):a[i]=r[i];else{var s,c=[],u=f(r.inScheme);try{for(u.s();!(s=u.n()).done;){var l=s.value,p={uri:l.uri};l.notation&&(p.notation=l.notation),l.prefLabel&&(p.prefLabel=l.prefLabel),c.push(p)}}catch(h){u.e(h)}finally{u.f()}a.inScheme=c}return a},H=W,K=function(e){if(!e)return[];var t=(e.uri?[e.uri]:[]).concat(e.identifier||[]);return t=(t=(t=t.concat(t.map((function(e){return e.startsWith("https")?e.replace("https","http"):e.replace("http","https")})))).concat(t.map((function(e){return e.endsWith("/")?e.substring(0,e.length-1):e+"/"})))).concat(t.map((function(e){return-1!=e.indexOf("/en/")?e.replace("/en/","/de/"):e.replace("/de/","/en/")})))},Z=function(e,t){if(null==e&&null==t)return!0;var r=K(e),n=K(t);return k.intersection(r,n).length>0},J=Z,G=Z,X=Z,Q=function(e){return k.get(e,"type",[]).includes("http://www.w3.org/2004/02/skos/core#Concept")||null!=k.get(e,"inScheme")||null!=k.get(e,"topConceptOf")},Y=function(e){return k.get(e,"type",[]).includes("http://www.w3.org/2004/02/skos/core#ConceptScheme")},ee=function(e,t){if(!e||!t)return!1;var r,n=f(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(Z(e,o))return!0}}catch(a){n.e(a)}finally{n.f()}return!1},te=ee,re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.sort((function(e,r){var n=k.get(e,"notation[0]"),o=k.get(r,"notation[0]");if(n&&o&&(n=n.toLowerCase(),o=o.toLowerCase()),t&&(n=parseFloat(n)||n,o=parseFloat(o)||o),n&&o&&n!=o||(n=e.uri,o=r.uri),n&&o){if(n>o)return 1;if(n<o)return-1}return 0}))},ne=function(e){var t=["notation[0]",["prefLabel.de","prefLabel.en"],"uri"];return e.sort((function(e,r){var n,o=f(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=void 0,s=void 0;if(Array.isArray(a)){var c,u=f(a);try{for(u.s();!(c=u.n()).done;){var l=c.value;i=i||k.get(e,l),s=s||k.get(r,l)}}catch(p){u.e(p)}finally{u.f()}}else i=k.get(e,a),s=k.get(r,a);if(null!=i&&null!=s){if((i=i.toLowerCase())>(s=s.toLowerCase()))return 1;if(i<s)return-1}}}catch(p){o.e(p)}finally{o.f()}return 0}))},oe=function(e){for(var t=k.pick(W(e),["from","to","fromScheme","toScheme","creator","contributor","type","created","modified","note","identifier","uri"]),r=function(){var e=o[n];k.forOwn(e,(function(t,r){var n,o=[],a=f(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.push(k.pick(i,["uri","notation"]))}}catch(s){a.e(s)}finally{a.f()}e[r]=o}))},n=0,o=[t.from,t.to];n<o.length;n++)r();return t.fromScheme&&(t.fromScheme=k.pick(t.fromScheme,["uri","notation"])),t.toScheme&&(t.toScheme=k.pick(t.toScheme,["uri","notation"])),t},ae=function(e){var t,r=f(E);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e==n.uri)return n}}catch(o){r.e(o)}finally{r.f()}return null},ie=ae("http://www.w3.org/2004/02/skos/core#mappingRelation"),se=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie;return t=Array.isArray(e)&&e.length>0?e[0]:e,ae(t)||r},ce=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).language,r=D(e,"from.memberSet.0.notation.0"),n=D(e,"to.memberSet.0.notation.0");r=null!==r?r:"",n=null!==n?n:"";var o=ae(D(e,"type.0"));o=o?o.SHORT:"";var a="",i="",s="";return t&&(a=D(e,"from.memberSet.0.prefLabel.".concat(t)),i=D(e,"to.memberSet.0.prefLabel.".concat(t)),s=D(e,"creator.0.prefLabel.".concat(t))),{fromNotation:r,toNotation:n,fromLabel:a,toLabel:i,type:o,creator:s}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delimiter||",",r=e.quoteChar||'"',n=e.lineTerminator||"\n",o=r+r,a=function(e){return r+(null==e?"":e.split(r).join(o))+r};return function(e){return e.map(a).join(t)+n}},le=function(e,t){for(var r=[],n=0,o=["from","to"];n<o.length;n++){var a=o[n];null!=t&&a!==t||(r=r.concat(k.get(e,"".concat(a,".memberSet"))||k.get(e,"".concat(a,".memberChoice"))||k.get(e,"".concat(a,".memberList"))||[]))}return r.filter((function(e){return null!=e}))},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ue(e),r=e.language||"en";null==e.type&&(e.type=!0);var n=function(r){r=r||[];for(var n=[],o=function(){var t=s[i];e.schemes&&n.push("".concat(t,"Scheme"));for(var o=Math.max.apply(Math,a(r.map((function(e){return le(e,t).length}))).concat([1])),c=0;c<o;c+=1)n.push("".concat(t,"Notation").concat(c?c+1:"")),e.labels&&n.push("".concat(t,"Label").concat(c?c+1:""))},i=0,s=["from","to"];i<s.length;i++)o();return e.type&&n.push("type"),e.creator&&n.push("creator"),t(n)},o=function(n){for(var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[],i=0,s=["from","to"];i<s.length;i++){var c=s[i];e.schemes&&a.push(k.get(n,"".concat(c,"Scheme.notation[0]"),""));var u=le(n,c),l=o["".concat(c,"Count")];null==l&&(l=u.length),l=Math.max(l,1);for(var f=0;f<l;f+=1)a.push(k.get(u[f],"notation[0]","")),e.labels&&a.push(k.get(u[f],"prefLabel.".concat(r),""))}return e.type&&a.push(k.get(ae(k.get(n,"type[0]")),"SHORT","")),e.creator&&a.push(k.get(n,"creator[0].prefLabel.".concat(r))),t(a)},i=function(e){var t="";(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{header:!0}).header&&(t+=n(e));var r,i={fromCount:Math.max.apply(Math,a(e.map((function(e){return le(e,"from").length})))),toCount:Math.max.apply(Math,a(e.map((function(e){return le(e,"to").length}))))},s=f(e);try{for(s.s();!(r=s.n()).done;){var c=r.value;t+=o(c,i)}}catch(u){s.e(u)}finally{s.f()}return t};return{header:n,fromMapping:o,fromMappings:i}};function pe(e,t){return k.isEqualWith(e,t,(function(e,t,r){var n=o({},r,e),a=o({},r,t);return"from"==r||"to"==r?!!k.isEqualWith(Object.getOwnPropertyNames(k.get(e,r,{})),Object.getOwnPropertyNames(k.get(t,r,{})))&&k.isEqualWith(le(n,r),le(a,r),(function(e,t,r){if(null!=r)return Z(e,t)})):"fromScheme"==r||"toScheme"==r?Z(e,t):void 0}))}var he=M.objectTypes,de=M.guessObjectType,me=function(e,t){var r=de(e),n=de(t);return!r||!n||r==n},ge=function(e){Array.isArray(e)&&e.sort((function(e,t){return null===e?1:null===t?-1:0}))},ve=function(e,t){return e&&t?((Array.isArray(e.identifier)||Array.isArray(t.identifier))&&(e.identifier=k.union(e.identifier||[],t.identifier||[])),!e.uri&&t.uri&&(e.uri=t.uri),e.uri&&t.uri&&e.uri!=t.uri&&!(e.identifier||[]).includes(t.uri)&&(e.identifier=(e.identifier||[]).concat([t.uri])),Array.isArray(e.identifier)&&e.uri&&(e.identifier=e.identifier.filter((function(t){return t!==e.uri}))),0==(e.identifier||[]).length&&delete e.identifier,ge(e.identifier),e):e},ye=function e(t,r,n){if(!t||!r)return t||r;var o=(n=n||{})._path||"",a=n.detectMismatch||[],i=n.skipPaths||[],s={};return k.forOwn(t,(function(t,c){if(!i.includes(o+c))if(Array.isArray(t)&&Array.isArray(r[c]))s[c]=k.unionWith(t,r[c],(function(e,t){return k.isObject(e)&&k.isObject(t)?Z(e,t):e===t})),ge(s[c]);else if(k.isObject(t)&&k.isObject(r[c]))s[c]=e(t,r[c],Object.assign({_path:"".concat(o).concat(c,".")},n));else{if(t&&r[c]&&a.includes(o+c)&&!k.isEqualWith(t,r[c]))throw new Error("Property mismatch in "+o+c);s[c]=t}})),k.forOwn(r,(function(e,r){t[r]||(s[r]=e)})),""==o&&k.omitMod(s,i),n.mergeUris&&ve(s,r),s};function be(e,t){var r;return e&&e.notation&&e.notation.length?(r=e.notation[0],(Y(e)||"scheme"==t)&&(r=r.toUpperCase())):e&&e.inScheme&&e.inScheme[0]&&e.uri&&(r=new N(e&&e.inScheme&&e.inScheme[0]).notationFromUri(e.uri)),r||""}function we(e,t){var r=e&&t?e[t]:e;if(r){var n=z.selectLanguage(r);if(n)return r[n]}return null}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null==(t=t||{}).fallbackToUri||t.fallbackToUri;return k.get(e,"prefLabel.".concat(t.language))||we(e,"prefLabel")||(r&&e&&e.uri?e.uri:"")}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||{};var r=k.get(e,"definition.".concat(t.language))||we(e,"definition")||[];return k.isString(r)&&(r=[r]),r}function Ae(e){return k.get(e,"stored",k.get(e,"constructor.stored",k.get(e,"provider.constructor.stored",!1)))}function je(e){return k.isString(e.creator)?e.creator:e.creator&&e.creator.id}function Oe(e){return k.get(e,"creator.name")||""}function ke(e,t){return!!(e&&k.isString(e.creator)?t&&t.includes(e.creator):t&&e.creator&&t.includes(e.creator.id))}var Ee={addContext:B,clean:q,cleanJSKOS:V,copyDeep:W,deepCopy:H,getAllUris:K,compare:Z,compareObjects:J,compareSchemes:G,compareConcepts:X,isConcept:Q,isScheme:Y,isContainedIn:ee,isSchemeInList:te,sortConcepts:re,sortSchemes:ne,minifyMapping:oe,mappingTypes:E,mappingTypeByUri:ae,mappingTypeByType:se,flattenMapping:ce,mappingCSV:fe,defaultMappingType:ie,conceptsOfMapping:le,compareMappingsDeep:pe,objectTypes:he,guessObjectType:de,matchObjectTypes:me,mergeUris:ve,merge:ye,normalize:function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):k.isObject(t)?(k.forOwn(t,(function(r,n){t[n]=e(r)})),t):k.isString(t)?t.normalize():t},isValidUri:function(e){var t=/^[A-Za-z][A-Za-z0-9+\-.]*:(?:\/\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\.[A-Za-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\?(?:[A-Za-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?(?:#(?:[A-Za-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?$/;return null!==e.match(t)},compareFunctions:{mappingsByConcepts:function(e,t,r){for(var n,o,a=0,i=["memberSet","memberList","memberChoice"];a<i.length;a++){var s=i[a];n=n||k.get(e,r+"."+s+"[0].notation[0]"),o=o||k.get(t,r+"."+s+"[0].notation[0]")}return null==n||n<o?-1:null==o||n>o?1:0}},userOwnsMapping:function(e,t){return!(!e||!t)&&[e.uri].concat(Object.values(e.identities||{}).map((function(e){return e.uri}))).filter((function(e){return null!=e})).includes(k.get(t,"creator[0].uri"))},notation:be,languageMapContent:we,prefLabel:_e,definition:Se,mappingRegistryIsStored:Ae,annotationCreatorUri:je,annotationCreatorName:Oe,annotationCreatorMatches:ke};return Object.assign({ConceptScheme:N,languagePreference:z},j,Ee)}()}));function Z(e){let t,r;return{c(){t=l("b"),r=b(e[4])},l(n){t=f(n,"B",{});var o=p(t);r=w(o,e[4]),o.forEach(h)},m(e,n){g(e,t,n),v(t,r)},p(e,t){16&t&&_(r,e[4])},d(e){e&&h(t)}}}function J(e){let t,r=K.prefLabel(e[0],{fallbackToUri:null==e[4]})+"";return{c(){t=b(r)},l(e){t=w(e,r)},m(e,r){g(e,t,r)},p(e,n){17&n&&r!==(r=K.prefLabel(e[0],{fallbackToUri:null==e[4]})+"")&&_(t,r)},d(e){e&&h(t)}}}function G(e){let t,r,n,o,a=e[1]&&Z(e),i=e[2]&&J(e);return{c(){t=l("span"),a&&a.c(),r=S(),i&&i.c(),this.h()},l(e){t=f(e,"SPAN",{class:!0});var n=p(t);a&&a.l(n),r=A(n),i&&i.l(n),n.forEach(h),this.h()},h(){d(t,"class","itemName svelte-1rbyuny"),j(t,"hoverable",e[3])},m(s,c){g(s,t,c),a&&a.m(t,null),v(t,r),i&&i.m(t,null),n||(o=O(t,"click",e[5]),n=!0)},p(e,[n]){e[1]?a?a.p(e,n):(a=Z(e),a.c(),a.m(t,r)):a&&(a.d(1),a=null),e[2]?i?i.p(e,n):(i=J(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null),8&n&&j(t,"hoverable",e[3])},i:y,o:y,d(e){e&&h(t),a&&a.d(),i&&i.d(),n=!1,o()}}}function X(e,t,r){let n,{item:o}=t,{showNotation:a=!0}=t,{showText:i=!0}=t,{isLink:s=!1}=t;return e.$$set=e=>{"item"in e&&r(0,o=e.item),"showNotation"in e&&r(1,a=e.showNotation),"showText"in e&&r(2,i=e.showText),"isLink"in e&&r(3,s=e.isLink)},e.$$.update=()=>{1&e.$$.dirty&&r(4,n=K.notation(o))},[o,a,i,s,n,function(t){k(e,t)}]}class Q extends s{constructor(e){super(),c(this,e,X,G,u,{item:0,showNotation:1,showText:2,isLink:3})}}function Y(e,t,r){const n=e.slice();return n[17]=t[r],n[19]=r,n}function ee(e){let t,r,n,o;const a=[ne,re,te],i=[];function s(e,t){return e[1]?0:0===e[2].length?1:2}return r=s(e),n=i[r]=a[r](e),{c(){t=l("div"),n.c(),this.h()},l(e){t=f(e,"DIV",{class:!0});var r=p(t);n.l(r),r.forEach(h),this.h()},h(){d(t,"class","results svelte-dmt5i4")},m(e,n){g(e,t,n),i[r].m(t,null),o=!0},p(e,o){let c=r;r=s(e),r===c?i[r].p(e,o):(E(),C(i[c],1,1,(()=>{i[c]=null})),I(),n=i[r],n?n.p(e,o):(n=i[r]=a[r](e),n.c()),x(n,1),n.m(t,null))},i(e){o||(x(n),o=!0)},o(e){C(n),o=!1},d(e){e&&h(t),i[r].d()}}}function te(e){let t,r,n=e[2],o=[];for(let i=0;i<n.length;i+=1)o[i]=oe(Y(e,n,i));const a=e=>C(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=U()},l(e){for(let t=0;t<o.length;t+=1)o[t].l(e);t=U()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);g(e,t,n),r=!0},p(e,r){if(12&r){let i;for(n=e[2],i=0;i<n.length;i+=1){const a=Y(e,n,i);o[i]?(o[i].p(a,r),x(o[i],1)):(o[i]=oe(a),o[i].c(),x(o[i],1),o[i].m(t.parentNode,t))}for(E(),i=n.length;i<o.length;i+=1)a(i);I()}},i(e){if(!r){for(let e=0;e<n.length;e+=1)x(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)C(o[t]);r=!1},d(e){z(o,e),e&&h(t)}}}function re(e){let t,r;return{c(){t=l("div"),r=b("No results"),this.h()},l(e){t=f(e,"DIV",{class:!0});var n=p(t);r=w(n,"No results"),n.forEach(h),this.h()},h(){d(t,"class","result svelte-dmt5i4")},m(e,n){g(e,t,n),v(t,r)},p:y,i:y,o:y,d(e){e&&h(t)}}}function ne(e){let t,r,n;return r=new V({props:{size:"20"}}),{c(){t=l("div"),$(r.$$.fragment),this.h()},l(e){t=f(e,"DIV",{class:!0});var n=p(t);N(r.$$.fragment,n),n.forEach(h),this.h()},h(){d(t,"class","result svelte-dmt5i4")},m(e,o){g(e,t,o),T(r,t,null),n=!0},p:y,i(e){n||(x(r.$$.fragment,e),n=!0)},o(e){C(r.$$.fragment,e),n=!1},d(e){e&&h(t),L(r)}}}function oe(e){let t,r,n,o,a,i;function s(){return e[11](e[19])}return r=new Q({props:{item:e[17]}}),{c(){t=l("div"),$(r.$$.fragment),n=S(),this.h()},l(e){t=f(e,"DIV",{class:!0,tabindex:!0});var o=p(t);N(r.$$.fragment,o),n=A(o),o.forEach(h),this.h()},h(){d(t,"class","result svelte-dmt5i4"),d(t,"tabindex","-1"),j(t,"selected",e[3]===e[19])},m(e,c){g(e,t,c),T(r,t,null),v(t,n),o=!0,a||(i=O(t,"mouseover",s),a=!0)},p(n,o){e=n;const a={};4&o&&(a.item=e[17]),r.$set(a),8&o&&j(t,"selected",e[3]===e[19])},i(e){o||(x(r.$$.fragment,e),o=!0)},o(e){C(r.$$.fragment,e),o=!1},d(e){e&&h(t),L(r),a=!1,i()}}}function ae(e){let t,r,n,o,a,i,s=e[4]&&ee(e);return{c(){t=l("div"),r=l("input"),n=S(),s&&s.c(),this.h()},l(e){t=f(e,"DIV",{class:!0});var o=p(t);r=f(o,"INPUT",{placeholder:!0,class:!0}),n=A(o),s&&s.l(o),o.forEach(h),this.h()},h(){d(r,"placeholder","Type to search..."),d(r,"class","svelte-dmt5i4"),d(t,"class","concept-search svelte-dmt5i4")},m(c,u){g(c,t,u),v(t,r),M(r,e[0]),v(t,n),s&&s.m(t,null),o=!0,a||(i=[O(r,"input",e[10]),O(r,"focus",e[6]),O(r,"blur",e[7]),O(r,"keydown",e[5])],a=!0)},p(e,[n]){1&n&&r.value!==e[0]&&M(r,e[0]),e[4]?s?(s.p(e,n),16&n&&x(s,1)):(s=ee(e),s.c(),x(s,1),s.m(t,null)):s&&(E(),C(s,1,1,(()=>{s=null})),I())},i(e){o||(x(s),o=!0)},o(e){C(s),o=!1},d(e){e&&h(t),s&&s.d(),a=!1,R(i)}}}function ie(e,t,r){let n;var o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};const a=P();let i,{scheme:s}=t,c="",u=!1,l=!1,f=[],p=0;function h(){f[p]&&a("select",f[p])}const d=((e,t)=>{let r;return(...n)=>{let o;return r&&clearTimeout(r),r=setTimeout((()=>{o=e(...n)}),t),o}})((function(e){return o(this,void 0,void 0,(function*(){i&&i();const t=s._registry.search({scheme:s,search:e});i=t.cancel,r(2,f=yield t),r(1,l=!1)}))}),200);return e.$$set=e=>{"scheme"in e&&r(8,s=e.scheme)},e.$$.update=()=>{513&e.$$.dirty&&r(4,n=""!==c&&u),1&e.$$.dirty&&(c?(r(1,l=!0),r(3,p=0),d(c)):r(2,f=[]))},[c,l,f,p,n,function({code:e,target:t}){switch(e){case"Escape":t&&t.blur&&t.blur();break;case"ArrowDown":r(3,p=(p+1)%f.length);break;case"ArrowUp":r(3,0===p?p=f.length-1:p-=1);break;case"Enter":h(),t&&t.blur&&t.blur()}},function(){r(9,u=!0)},function(e){e.relatedTarget&&e.relatedTarget.className.includes("result")&&h(),r(9,u=!1)},s,u,function(){c=this.value,r(0,c)},e=>{r(3,p=e)}]}class se extends s{constructor(e){super(),c(this,e,ie,ae,u,{scheme:8})}}var ce,ue,le=W.MutationObserver||W.WebKitMutationObserver;if(le){var fe=0,pe=new le(ge),he=W.document.createTextNode("");pe.observe(he,{characterData:!0}),ce=function(){he.data=fe=++fe%2}}else if(W.setImmediate||void 0===W.MessageChannel)ce="document"in W&&"onreadystatechange"in W.document.createElement("script")?function(){var e=W.document.createElement("script");e.onreadystatechange=function(){ge(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},W.document.documentElement.appendChild(e)}:function(){setTimeout(ge,0)};else{var de=new W.MessageChannel;de.port1.onmessage=ge,ce=function(){de.port2.postMessage(0)}}var me=[];function ge(){var e,t;ue=!0;for(var r=me.length;r;){for(t=me,me=[],e=-1;++e<r;)t[e]();r=me.length}ue=!1}var ve=function(e){1!==me.push(e)||ue||ce()};function ye(){}var be={},we=["REJECTED"],_e=["FULFILLED"],Se=["PENDING"],Ae=je;function je(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=Se,this.queue=[],this.outcome=void 0,e!==ye&&Ce(this,e)}function Oe(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function ke(e,t,r){ve((function(){var n;try{n=t(r)}catch(o){return be.reject(e,o)}n===e?be.reject(e,new TypeError("Cannot resolve promise with itself")):be.resolve(e,n)}))}function Ee(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function Ce(e,t){var r=!1;function n(t){r||(r=!0,be.reject(e,t))}function o(t){r||(r=!0,be.resolve(e,t))}var a=Ie((function(){t(o,n)}));"error"===a.status&&n(a.value)}function Ie(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}je.prototype.catch=function(e){return this.then(null,e)},je.prototype.then=function(e,t){if("function"!=typeof e&&this.state===_e||"function"!=typeof t&&this.state===we)return this;var r=new this.constructor(ye);this.state!==Se?ke(r,this.state===_e?e:t,this.outcome):this.queue.push(new Oe(r,e,t));return r},Oe.prototype.callFulfilled=function(e){be.resolve(this.promise,e)},Oe.prototype.otherCallFulfilled=function(e){ke(this.promise,this.onFulfilled,e)},Oe.prototype.callRejected=function(e){be.reject(this.promise,e)},Oe.prototype.otherCallRejected=function(e){ke(this.promise,this.onRejected,e)},be.resolve=function(e,t){var r=Ie(Ee,t);if("error"===r.status)return be.reject(e,r.value);var n=r.value;if(n)Ce(e,n);else{e.state=_e,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},be.reject=function(e,t){e.state=we,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},je.resolve=function(e){if(e instanceof this)return e;return be.resolve(new this(ye),e)},je.reject=function(e){var t=new this(ye);return be.reject(t,e)},je.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var o=new Array(r),a=0,i=-1,s=new this(ye);for(;++i<r;)c(e[i],i);return s;function c(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==r||n||(n=!0,be.resolve(s,o))}),(function(e){n||(n=!0,be.reject(s,e))}))}},je.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var o=-1,a=new this(ye);for(;++o<r;)i=e[o],t.resolve(i).then((function(e){n||(n=!0,be.resolve(a,e))}),(function(e){n||(n=!0,be.reject(a,e))}));var i;return a},"function"!=typeof W.Promise&&(W.Promise=Ae)
/*!
 * cocoda-sdk v1.0.12
 * Copyright (c) 2020 Verbundzentrale des GBV (VZG)
 * @license MIT
 *
 * For dependency license information, please see dist/cocoda-sdk.js.LICENSES.txt.
 */;const xe=H((function(e,t){e.exports=function(){class e extends Error{constructor({message:e="",relatedError:t=null,code:r=null}={}){!e&&t&&t.message&&(e=t.message),super(e),this.name=this.constructor.name,this.relatedError=t,this.code=r}}class t extends e{constructor(e){var{method:t,message:r=""}=e,n=i(e,["method","message"]);n.message=`Method not implemented: ${t} (${r})`,super(n)}}class r extends e{constructor(e){var{parameter:t,message:r=""}=e,n=i(e,["parameter","message"]);n.message=`Invalid or missing parameter: ${t} (${r})`,super(n)}}class n extends e{}class o extends e{}class s extends e{}class c extends e{}class u extends e{}class l extends e{}var f={CDKError:e,MethodNotImplementedError:t,InvalidOrMissingParameterError:r,BackendError:o,BackendUnavailableError:s,NetworkError:c,InvalidRequestError:n,MissingApiUrlError:u,InvalidProviderError:l},p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==W?W:"undefined"!=typeof self?self:{};function h(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function d(e){var t={exports:{}};return e(t,t.exports),t.exports
/*!
     * jskos-tools v1.0.17
     * Copyright (c) 2018 Verbundzentrale des GBV (VZG)
     * @license MIT
     *
     * For dependency license information, please see ./dist/jskos-tools.js.LICENSES.txt.
     */}var m=d((function(e,t){!function(t,r){e.exports=r()}(0,(function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return i(e)||s(e)||c(e)||l()}function i(e){if(Array.isArray(e))return u(e)}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}var p=function(e){var t,r,n,o,a,i,s,c,u,l=function(e,t){return e<<t|e>>>32-t},f=function(e){var t,r="";for(t=7;t>=0;t--)r+=(e>>>4*t&15).toString(16);return r},p=new Array(80),h=1732584193,d=4023233417,m=2562383102,g=271733878,v=3285377520,y=(e=unescape(encodeURIComponent(e))).length,b=[];for(r=0;r<y-3;r+=4)n=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),b.push(n);switch(y%4){case 0:r=2147483648;break;case 1:r=e.charCodeAt(y-1)<<24|8388608;break;case 2:r=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:r=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(b.push(r);b.length%16!=14;)b.push(0);for(b.push(y>>>29),b.push(y<<3&4294967295),t=0;t<b.length;t+=16){for(r=0;r<16;r++)p[r]=b[t+r];for(r=16;r<=79;r++)p[r]=l(p[r-3]^p[r-8]^p[r-14]^p[r-16],1);for(o=h,a=d,i=m,s=g,c=v,r=0;r<=19;r++)u=l(o,5)+(a&i|~a&s)+c+p[r]+1518500249&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;for(r=20;r<=39;r++)u=l(o,5)+(a^i^s)+c+p[r]+1859775393&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;for(r=40;r<=59;r++)u=l(o,5)+(a&i|a&s|i&s)+c+p[r]+2400959708&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;for(r=60;r<=79;r++)u=l(o,5)+(a^i^s)+c+p[r]+3395469782&4294967295,c=s,s=i,i=l(a,30),a=o,o=u;h=h+o&4294967295,d=d+a&4294967295,m=m+i&4294967295,g=g+s&4294967295,v=v+c&4294967295}return(u=f(h)+f(d)+f(m)+f(g)+f(v)).toLowerCase()};function h(e){return e.map((function(e){return e&&e.uri})).filter(Boolean)}function d(e){return["memberSet","memberList","memberChoice"].find((function(t){return e[t]}))}function m(e){var t=d(e),r=e[t]?h(e[t]):[];return o({},r.length>1?t:"memberSet",r.map((function(e){return{uri:e}})))}function g(e){for(var t=e.from,r=e.to,n=e.type,o={from:m(t||{}),to:m(r||{}),type:[n&&n[0]||"http://www.w3.org/2004/02/skos/core#mappingRelation"]},a=0,i=["from","to"];a<i.length;a++){var s=i[a];if(0==(o[s][d(o[s])]||[]).length){var c=e[s+"Scheme"];c&&c.uri&&(o[s+"Scheme"]={uri:c.uri})}}return o}function v(e){var t,r=[e.from,e.to].filter(Boolean).map((function(e){return h(e[d(e)]||[])}));return(t=[]).concat.apply(t,a(r)).sort()}function y(e){var t=JSON.stringify(g(e),["from","fromScheme","to","toScheme","type","memberSet","memberList","memberChoice","uri"]);return"urn:jskos:mapping:content:"+p(t+"\n")}function b(e){var t=JSON.stringify(v(e));return"urn:jskos:mapping:members:"+p(t+"\n")}function w(e){var t=(e.identifier||[]).filter((function(e){return!e.startsWith("urn:jskos:mapping:")})).concat([b(e),y(e)]).sort();return Object.assign({},e,{identifier:t})}function _(e,t,r){return e=e&&w(e),t=t&&w(t),(e&&e.identifier?e.identifier.find((function(e){return e.startsWith(r)})):null)==(t&&t.identifier?t.identifier.find((function(e){return e.startsWith(r)})):null)}function S(e,t){return _(e,t,"urn:jskos:mapping:content:")}function A(e,t){return _(e,t,"urn:jskos:mapping:members:")}var j={mappingContent:g,mappingMembers:v,mappingContentIdentifier:y,mappingMembersIdentifier:b,addMappingIdentifiers:w,compareMappings:S,compareMappingContent:S,compareMappingMembers:A};function O(t,r,n){var o=Array.prototype.slice,a="function"==typeof Object.keys?Object.keys:function(e){var t=[];for(var r in e)t.push(r);return t},i=function(t,r){return t===r||(t instanceof Date&&r instanceof Date?t.getTime()===r.getTime():"object"!=e(t)&&"object"!=e(r)?t==r:u(t,r))};function s(e){return null==e}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function u(e,t){if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(c(e))return!!c(t)&&(e=o.call(e),t=o.call(t),i(e,t));try{var r,u,l=a(e),f=a(t)}catch(h){return!1}if(l.length!=f.length)return!1;for(l.sort(),f.sort(),u=l.length-1;u>=0;u--)if(l[u]!=f[u])return!1;for(u=l.length-1;u>=0;u--)if(r=l[u],n){var p=n(e[r],t[r],r);if(void 0===p&&(p=O(e[r],t[r])),!p)return!1}else if(!i(e[r],t[r]))return!1;return!0}return i(t,r)}var k={get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=function(r){return String.prototype.split.call(t,r).filter(Boolean).reduce((function(e,t){return null!=e?e[t]:e}),e)},o=n(/[,[\]]+?/)||n(/[,[\].]+?/);return void 0===o||o===e?r:o},pick:function(e,t){return t.reduce((function(t,r){return e&&e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})},forOwn:function(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},isEqualWith:O,intersection:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))},isObject:function(t){return"object"===e(t)&&null!==t},isString:function(e){return!(!e||"string"!=typeof e.valueOf())},union:function(e,t){return a(new Set([].concat(a(e),a(t))))},unionWith:function(e,t,r){return[].concat(a(e),a(t)).reduce((function(e,t){return-1!==e.findIndex((function(e){return r(e,t)}))||e.push(t),e}),[])},omitMod:function(e,t){var r,n=f(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;"string"==typeof o&&(o=o.split("."));for(var a=0;a<o.length-1;a++)e=e[o[a]];delete e[o.pop()]}}catch(i){n.e(i)}finally{n.f()}}},E=[{RELEVANCE:"very high",broader:[{uri:"http://www.w3.org/2004/02/skos/core#closeMatch"}],definition:{de:["gleiche Bedeutung"],en:["same meaning"]},notation:["="],prefLabel:{ar:"تطابق تام",be:"дакладная адпаведнасць","be-tarask":"дакладная адпаведнасьць",ca:"equivalència exacta",cs:"přesná shoda",da:"exact match",de:"exakte Übereinstimmung",en:"exact match",eo:"ekzakta ekvivalento",es:"equivalencia exacta",fi:"vastaava käsite",fr:"équivalence exacte",he:"התאמה מדויקת",hu:"pontos egyezés",id:"sama persis",it:"corrispondenza esatta",ja:"完全一致",mk:"точно совпаѓање",ms:"padanan tepat",nb:"eksakt samsvar",nl:"exacte match",nn:"eksakt samsvar",pl:"dokładne dopasowanie",pt:"correspondência exata",ro:"echivalentul exact",ru:"точное соответствие",sq:"përputhje e përpiktë",sr:"тачно подударање",sv:"exakt träff",uk:"точна відповідність",zh:"精確匹配","zh-hans":"精确匹配","zh-hant":"精確匹配"},SHORT:"exact",uri:"http://www.w3.org/2004/02/skos/core#exactMatch"},{RELEVANCE:"high",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["in etwa gleiche Bedeutung"],en:["same general idea but not fully identical meaning"]},notation:["≈"],prefLabel:{ar:"تطابق قريب","be-tarask":"блізкая адпаведнасьць",ca:"equivalència inexacta",de:"hohe Übereinstimmung",en:"close match",eo:"proksima kongruaĵo",es:"equivalencia inexacta",fi:"lähes vastaava käsite",fr:"quasi-équivalence",he:"התאמה קרובה",it:"corrispondenza stretta",mk:"блиско совпаѓање",nb:"nært samsvar",nl:"nabije match",nn:"nært samsvar",pl:"częściowe dopasowanie",pt:"correspondência próxima",ru:"близкое соответствие",sr:"блиско поклапање",sv:"nära matchning","zh-hans":"高度匹配"},SHORT:"close",uri:"http://www.w3.org/2004/02/skos/core#closeMatch"},{RELEVANCE:"medium",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["umfassendere Bedeutung"],en:["broader meaning"]},notation:[">"],prefLabel:{"be-tarask":"шырокая адпаведнасьць",de:"allgemeinere Bedeutung",en:"broad match",eo:"malstrikta kongruo",fi:"vastaava laajempi käsite",he:"התאמה רחבה",it:"corrispondenza generica",ja:"部分一致",mk:"пошироко совпаѓање",nb:"bredere samsvar",nl:"brede match",nn:"breitt samsvar",pl:"dopasowanie pojęcia o szerszym znaczeniu","pt-br":"correspondência genérica",ru:"более широкое соответствие",sv:"bred träff","zh-hans":"广泛匹配"},related:[{uri:"http://www.w3.org/2004/02/skos/core#narrowMatch"}],SHORT:"broad",uri:"http://www.w3.org/2004/02/skos/core#broadMatch"},{RELEVANCE:"medium",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["umfassendere Bedeutung"],en:["more specific meaning"]},notation:["<"],prefLabel:{"be-tarask":"вузкая адпаведнасьць",de:"spezifischere Bedeutung",en:"narrow match",eo:"strikta kongruo",fi:"vastaava suppeampi käsite",he:"התאמה צרה",mk:"потесно совпаѓање",nb:"smalere samsvar",nl:"nauwe match",nn:"snevert samsvar",pl:"dopasowanie pojęcia o węższym znaczeniu","pt-br":"correspondência aproximada",ru:"более узкое соответствие",sv:"smal träff","zh-hans":"有限匹配"},related:[{uri:"http://www.w3.org/2004/02/skos/core#broadMatch"}],SHORT:"narrow",uri:"http://www.w3.org/2004/02/skos/core#narrowMatch"},{RELEVANCE:"low",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["assoziative Verknüpfung unterschiedlicher Bedeutungen"],en:["associative link between meanings"]},notation:["~"],prefLabel:{"be-tarask":"зьвязаная адпаведнасьць",de:"verwandte Bedeutung",en:"related match",he:"התאמה קשורה",it:"corrispondenza correlata",mk:"поврзано совпаѓање",nb:"relatert samsvar",nl:"gerelateerde match",pl:"dopasowanie pojęcia o powiązanym znaczeniu",ru:"ассоциативное соответствие","zh-hans":"关联匹配"},SHORT:"related",uri:"http://www.w3.org/2004/02/skos/core#relatedMatch"},{RELEVANCE:"generic",definition:{de:["unbekannter Bedeutungszusammenhang"],en:["unknown type of link between meanings"]},notation:["→"],prefLabel:{ar:"نوع علاقة التطبيق",be:"характэрная адносіна адлюстравання","be-tarask":"характэрная адносіна адлюстраваньня",ca:"relació de mapatge",de:"allgemeine Mapping-Relation",en:"SKOS generic mapping relation",he:"יחס מיפוי כללי",id:"relasi pemetaan",mk:"пресликувачки однос",nb:"generell mappingrelasjon","pt-br":"relação genérica de mapeamento",sr:"релација мапирања",sv:"mappnings relation",zh:"映射關係","zh-hant":"映射關係"},SHORT:"",uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],C={Concept:{type:["http://www.w3.org/2004/02/skos/core#Concept"]},ConceptScheme:{type:["http://www.w3.org/2004/02/skos/core#ConceptScheme"]},ConceptMapping:{type:E.map((function(e){return e.uri}))},ConceptOccurrence:{type:["http://purl.org/cld/cdtype/CatalogueOrIndex"]},Registry:{type:["http://www.w3.org/ns/dcat#Catalog"]},Distribution:{type:["http://www.w3.org/ns/dcat#Distribution"]},Concordance:{type:["http://rdfs.org/ns/void#Linkset","http://rdf-vocabulary.ddialliance.org/xkos#Correspondence"]},Resource:{},Item:{},Annotation:{type:["Annotation","http://www.w3.org/ns/oa#Annotation"]}},I=Object.keys(C).reduce((function(e,t){var r,n=f(C[t].type||[]);try{for(n.s();!(r=n.n()).done;)e[r.value]=t}catch(o){n.e(o)}finally{n.f()}return e}),{});function x(t){var r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof t&&t)t in I?r=I[t]:(t=t.toLowerCase().replace(/s$/,""),r=Object.keys(C).find((function(e){var r=e.toLowerCase();if(r===t||r==="concept"+t)return!0})));else if("object"===e(t)&&t.type){var o,a=f(Array.isArray(t.type)?t.type:[t.type]);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(i in I){r=I[i];break}}}catch(s){a.e(s)}finally{a.f()}}return n&&r?r.toLowerCase().replace(/^concept(.+)/,"$1"):r}var M={objectTypes:C,guessObjectType:x},R=/[\\^$.*+?()[\]{}|]/g,P=function(e){return e.replace(R,"\\$&")},$=/[% ]/,N=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t(this,e),Object.assign(this,r),this.notationPattern||(this.notationPattern=".+"),!this.uriPattern&&this.namespace){this.uriPattern="^"+P(this.namespace);var n=this.notationPattern.replace($,encodeURI);this.uriPattern+="("+n+")$"}this.NOTATION_REGEX=RegExp("^"+this.notationPattern+"$"),this.uriPattern&&(this.URI_REGEX=RegExp(this.uriPattern))}return n(e,[{key:"isValidNotation",value:function(e){return this.NOTATION_REGEX.exec(e)}},{key:"notationFromUri",value:function(e){if(this.URI_REGEX){var t=this.URI_REGEX.exec(e);if(t)return decodeURI(t[1])}}},{key:"uriFromNotation",value:function(e){if(this.uriPattern)return e=encodeURI(e),this.uriPattern.replace(/^\^|\$$/g,"").replace(/\\/g,"").replace(/\(.*\)/,e)}},{key:"conceptFromUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.notationFromUri(e);if(void 0!==r){var n={uri:e,notation:[r]};return t.inScheme&&(n.inScheme=[{uri:this.uri}]),t.topConcept&&(n.topConceptOf=[{uri:this.uri}]),n}}},{key:"conceptFromNotation",value:function(e,t){if(this.isValidNotation(e))return this.conceptFromUri(this.uriFromNotation(e),t)}}]),e}(),T={store:null,path:"",defaults:["en"],getLanguages:L,selectLanguage:U};function L(){return k.get(T.store,T.path)||T.defaults}function U(e){if(!e)return null;var t,r=f(L());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e[n])return n}}catch(s){r.e(s)}finally{r.f()}for(var o=0,a=Object.keys(e);o<a.length;o++){var i=a[o];if("-"!=i)return i}return null}var z=T,F=function(e){return/^[A-Z]*$/.test(e)},D=function(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e)},B=function(e){return(e instanceof Array?e:[e]).forEach((function(e){e["@context"]="https://gbv.github.io/jskos/context.json"})),e},q=function t(r){return Object.keys(r).forEach((function(n){F(n)||n.startsWith("_")?delete r[n]:null!=r[n]&&"object"===e(r[n])&&(r[n]=t(r[n]))})),r},V=q,W=function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n=n.concat(["ancestors","narrower","broader","mappings","memberList","TOPCONCEPTS","MAPPINGS","PROVIDER"]);var a=Array.isArray(r)?[]:{};for(var i in r)if(!o||"_"!=i[0])if(n.includes(i)){if(r[i]&&Array.isArray(r[i])){r[i].length>0?a[i]=[null]:a[i]=[];continue}a[i]=null}else if("inScheme"!=i)null!=r[i]&&"object"==e(r[i])?a[i]=t(r[i]):a[i]=r[i];else{var s,c=[],u=f(r.inScheme);try{for(u.s();!(s=u.n()).done;){var l=s.value,p={uri:l.uri};l.notation&&(p.notation=l.notation),l.prefLabel&&(p.prefLabel=l.prefLabel),c.push(p)}}catch(h){u.e(h)}finally{u.f()}a.inScheme=c}return a},H=W,K=function(e){if(!e)return[];var t=(e.uri?[e.uri]:[]).concat(e.identifier||[]);return t=(t=(t=t.concat(t.map((function(e){return e.startsWith("https")?e.replace("https","http"):e.replace("http","https")})))).concat(t.map((function(e){return e.endsWith("/")?e.substring(0,e.length-1):e+"/"})))).concat(t.map((function(e){return-1!=e.indexOf("/en/")?e.replace("/en/","/de/"):e.replace("/de/","/en/")})))},Z=function(e,t){if(null==e&&null==t)return!0;var r=K(e),n=K(t);return k.intersection(r,n).length>0},J=Z,G=Z,X=Z,Q=function(e){return k.get(e,"type",[]).includes("http://www.w3.org/2004/02/skos/core#Concept")||null!=k.get(e,"inScheme")||null!=k.get(e,"topConceptOf")},Y=function(e){return k.get(e,"type",[]).includes("http://www.w3.org/2004/02/skos/core#ConceptScheme")},ee=function(e,t){if(!e||!t)return!1;var r,n=f(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(Z(e,o))return!0}}catch(a){n.e(a)}finally{n.f()}return!1},te=ee,re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.sort((function(e,r){var n=k.get(e,"notation[0]"),o=k.get(r,"notation[0]");if(n&&o&&(n=n.toLowerCase(),o=o.toLowerCase()),t&&(n=parseFloat(n)||n,o=parseFloat(o)||o),n&&o&&n!=o||(n=e.uri,o=r.uri),n&&o){if(n>o)return 1;if(n<o)return-1}return 0}))},ne=function(e){var t=["notation[0]",["prefLabel.de","prefLabel.en"],"uri"];return e.sort((function(e,r){var n,o=f(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=void 0,s=void 0;if(Array.isArray(a)){var c,u=f(a);try{for(u.s();!(c=u.n()).done;){var l=c.value;i=i||k.get(e,l),s=s||k.get(r,l)}}catch(p){u.e(p)}finally{u.f()}}else i=k.get(e,a),s=k.get(r,a);if(null!=i&&null!=s){if((i=i.toLowerCase())>(s=s.toLowerCase()))return 1;if(i<s)return-1}}}catch(p){o.e(p)}finally{o.f()}return 0}))},oe=function(e){for(var t=k.pick(W(e),["from","to","fromScheme","toScheme","creator","contributor","type","created","modified","note","identifier","uri"]),r=function(){var e=o[n];k.forOwn(e,(function(t,r){var n,o=[],a=f(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.push(k.pick(i,["uri","notation"]))}}catch(s){a.e(s)}finally{a.f()}e[r]=o}))},n=0,o=[t.from,t.to];n<o.length;n++)r();return t.fromScheme&&(t.fromScheme=k.pick(t.fromScheme,["uri","notation"])),t.toScheme&&(t.toScheme=k.pick(t.toScheme,["uri","notation"])),t},ae=function(e){var t,r=f(E);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e==n.uri)return n}}catch(o){r.e(o)}finally{r.f()}return null},ie=ae("http://www.w3.org/2004/02/skos/core#mappingRelation"),se=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie;return t=Array.isArray(e)&&e.length>0?e[0]:e,ae(t)||r},ce=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).language,r=D(e,"from.memberSet.0.notation.0"),n=D(e,"to.memberSet.0.notation.0");r=null!==r?r:"",n=null!==n?n:"";var o=ae(D(e,"type.0"));o=o?o.SHORT:"";var a="",i="",s="";return t&&(a=D(e,"from.memberSet.0.prefLabel.".concat(t)),i=D(e,"to.memberSet.0.prefLabel.".concat(t)),s=D(e,"creator.0.prefLabel.".concat(t))),{fromNotation:r,toNotation:n,fromLabel:a,toLabel:i,type:o,creator:s}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delimiter||",",r=e.quoteChar||'"',n=e.lineTerminator||"\n",o=r+r,a=function(e){return r+(null==e?"":e.split(r).join(o))+r};return function(e){return e.map(a).join(t)+n}},le=function(e,t){for(var r=[],n=0,o=["from","to"];n<o.length;n++){var a=o[n];null!=t&&a!==t||(r=r.concat(k.get(e,"".concat(a,".memberSet"))||k.get(e,"".concat(a,".memberChoice"))||k.get(e,"".concat(a,".memberList"))||[]))}return r.filter((function(e){return null!=e}))},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ue(e),r=e.language||"en";null==e.type&&(e.type=!0);var n=function(r){r=r||[];for(var n=[],o=function(){var t=s[i];e.schemes&&n.push("".concat(t,"Scheme"));for(var o=Math.max.apply(Math,a(r.map((function(e){return le(e,t).length}))).concat([1])),c=0;c<o;c+=1)n.push("".concat(t,"Notation").concat(c?c+1:"")),e.labels&&n.push("".concat(t,"Label").concat(c?c+1:""))},i=0,s=["from","to"];i<s.length;i++)o();return e.type&&n.push("type"),e.creator&&n.push("creator"),t(n)},o=function(n){for(var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[],i=0,s=["from","to"];i<s.length;i++){var c=s[i];e.schemes&&a.push(k.get(n,"".concat(c,"Scheme.notation[0]"),""));var u=le(n,c),l=o["".concat(c,"Count")];null==l&&(l=u.length),l=Math.max(l,1);for(var f=0;f<l;f+=1)a.push(k.get(u[f],"notation[0]","")),e.labels&&a.push(k.get(u[f],"prefLabel.".concat(r),""))}return e.type&&a.push(k.get(ae(k.get(n,"type[0]")),"SHORT","")),e.creator&&a.push(k.get(n,"creator[0].prefLabel.".concat(r))),t(a)},i=function(e){var t="";(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{header:!0}).header&&(t+=n(e));var r,i={fromCount:Math.max.apply(Math,a(e.map((function(e){return le(e,"from").length})))),toCount:Math.max.apply(Math,a(e.map((function(e){return le(e,"to").length}))))},s=f(e);try{for(s.s();!(r=s.n()).done;){var c=r.value;t+=o(c,i)}}catch(u){s.e(u)}finally{s.f()}return t};return{header:n,fromMapping:o,fromMappings:i}};function pe(e,t){return k.isEqualWith(e,t,(function(e,t,r){var n=o({},r,e),a=o({},r,t);return"from"==r||"to"==r?!!k.isEqualWith(Object.getOwnPropertyNames(k.get(e,r,{})),Object.getOwnPropertyNames(k.get(t,r,{})))&&k.isEqualWith(le(n,r),le(a,r),(function(e,t,r){if(null!=r)return Z(e,t)})):"fromScheme"==r||"toScheme"==r?Z(e,t):void 0}))}var he=M.objectTypes,de=M.guessObjectType,me=function(e,t){var r=de(e),n=de(t);return!r||!n||r==n},ge=function(e){Array.isArray(e)&&e.sort((function(e,t){return null===e?1:null===t?-1:0}))},ve=function(e,t){return e&&t?((Array.isArray(e.identifier)||Array.isArray(t.identifier))&&(e.identifier=k.union(e.identifier||[],t.identifier||[])),!e.uri&&t.uri&&(e.uri=t.uri),e.uri&&t.uri&&e.uri!=t.uri&&!(e.identifier||[]).includes(t.uri)&&(e.identifier=(e.identifier||[]).concat([t.uri])),Array.isArray(e.identifier)&&e.uri&&(e.identifier=e.identifier.filter((function(t){return t!==e.uri}))),0==(e.identifier||[]).length&&delete e.identifier,ge(e.identifier),e):e},ye=function e(t,r,n){if(!t||!r)return t||r;var o=(n=n||{})._path||"",a=n.detectMismatch||[],i=n.skipPaths||[],s={};return k.forOwn(t,(function(t,c){if(!i.includes(o+c))if(Array.isArray(t)&&Array.isArray(r[c]))s[c]=k.unionWith(t,r[c],(function(e,t){return k.isObject(e)&&k.isObject(t)?Z(e,t):e===t})),ge(s[c]);else if(k.isObject(t)&&k.isObject(r[c]))s[c]=e(t,r[c],Object.assign({_path:"".concat(o).concat(c,".")},n));else{if(t&&r[c]&&a.includes(o+c)&&!k.isEqualWith(t,r[c]))throw new Error("Property mismatch in "+o+c);s[c]=t}})),k.forOwn(r,(function(e,r){t[r]||(s[r]=e)})),""==o&&k.omitMod(s,i),n.mergeUris&&ve(s,r),s};function be(e,t){var r;return e&&e.notation&&e.notation.length?(r=e.notation[0],(Y(e)||"scheme"==t)&&(r=r.toUpperCase())):e&&e.inScheme&&e.inScheme[0]&&e.uri&&(r=new N(e&&e.inScheme&&e.inScheme[0]).notationFromUri(e.uri)),r||""}function we(e,t){var r=e&&t?e[t]:e;if(r){var n=z.selectLanguage(r);if(n)return r[n]}return null}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null==(t=t||{}).fallbackToUri||t.fallbackToUri;return k.get(e,"prefLabel.".concat(t.language))||we(e,"prefLabel")||(r&&e&&e.uri?e.uri:"")}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||{};var r=k.get(e,"definition.".concat(t.language))||we(e,"definition")||[];return k.isString(r)&&(r=[r]),r}function Ae(e){return k.get(e,"stored",k.get(e,"constructor.stored",k.get(e,"provider.constructor.stored",!1)))}function je(e){return k.isString(e.creator)?e.creator:e.creator&&e.creator.id}function Oe(e){return k.get(e,"creator.name")||""}function ke(e,t){return!!(e&&k.isString(e.creator)?t&&t.includes(e.creator):t&&e.creator&&t.includes(e.creator.id))}var Ee={addContext:B,clean:q,cleanJSKOS:V,copyDeep:W,deepCopy:H,getAllUris:K,compare:Z,compareObjects:J,compareSchemes:G,compareConcepts:X,isConcept:Q,isScheme:Y,isContainedIn:ee,isSchemeInList:te,sortConcepts:re,sortSchemes:ne,minifyMapping:oe,mappingTypes:E,mappingTypeByUri:ae,mappingTypeByType:se,flattenMapping:ce,mappingCSV:fe,defaultMappingType:ie,conceptsOfMapping:le,compareMappingsDeep:pe,objectTypes:he,guessObjectType:de,matchObjectTypes:me,mergeUris:ve,merge:ye,normalize:function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):k.isObject(t)?(k.forOwn(t,(function(r,n){t[n]=e(r)})),t):k.isString(t)?t.normalize():t},isValidUri:function(e){var t=/^[A-Za-z][A-Za-z0-9+\-.]*:(?:\/\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\.[A-Za-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\?(?:[A-Za-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?(?:#(?:[A-Za-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?$/;return null!==e.match(t)},compareFunctions:{mappingsByConcepts:function(e,t,r){for(var n,o,a=0,i=["memberSet","memberList","memberChoice"];a<i.length;a++){var s=i[a];n=n||k.get(e,r+"."+s+"[0].notation[0]"),o=o||k.get(t,r+"."+s+"[0].notation[0]")}return null==n||n<o?-1:null==o||n>o?1:0}},userOwnsMapping:function(e,t){return!(!e||!t)&&[e.uri].concat(Object.values(e.identities||{}).map((function(e){return e.uri}))).filter((function(e){return null!=e})).includes(k.get(t,"creator[0].uri"))},notation:be,languageMapContent:we,prefLabel:_e,definition:Se,mappingRegistryIsStored:Ae,annotationCreatorUri:je,annotationCreatorName:Oe,annotationCreatorMatches:ke};return Object.assign({ConceptScheme:N,languagePreference:z},j,Ee)}))})),g=Array.isArray,v="object"==typeof p&&p&&p.Object===Object&&p,y="object"==typeof self&&self&&self.Object===Object&&self,b=v||y||Function("return this")(),w=b.Symbol,_=Object.prototype,S=_.hasOwnProperty,A=_.toString,j=w?w.toStringTag:void 0;function O(e){var t=S.call(e,j),r=e[j];try{e[j]=void 0;var n=!0}catch(a){}var o=A.call(e);return n&&(t?e[j]=r:delete e[j]),o}var k=O,E=Object.prototype.toString;function C(e){return E.call(e)}var I=C,x="[object Null]",M="[object Undefined]",R=w?w.toStringTag:void 0;function P(e){return null==e?void 0===e?M:x:R&&R in Object(e)?k(e):I(e)}var $=P;function N(e){return null!=e&&"object"==typeof e}var T=N,L="[object Symbol]";function U(e){return"symbol"==typeof e||T(e)&&$(e)==L}var z=U,F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D=/^\w*$/;function B(e,t){if(g(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!z(e))||D.test(e)||!F.test(e)||null!=t&&e in Object(t)}var q=B;function V(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var H=V,K="[object AsyncFunction]",Z="[object Function]",J="[object GeneratorFunction]",G="[object Proxy]";function X(e){if(!H(e))return!1;var t=$(e);return t==Z||t==J||t==K||t==G}var Q,Y=X,ee=b["__core-js_shared__"],te=(Q=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"";function re(e){return!!te&&te in e}var ne=re,oe=Function.prototype.toString;function ae(e){if(null!=e){try{return oe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var ie=ae,se=/[\\^$.*+?()[\]{}|]/g,ce=/^\[object .+?Constructor\]$/,ue=Function.prototype,le=Object.prototype,fe=ue.toString,pe=le.hasOwnProperty,he=RegExp("^"+fe.call(pe).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function de(e){return!(!H(e)||ne(e))&&(Y(e)?he:ce).test(ie(e))}var me=de;function ge(e,t){return null==e?void 0:e[t]}var ve=ge;function ye(e,t){var r=ve(e,t);return me(r)?r:void 0}var be=ye,we=be(Object,"create");function _e(){this.__data__=we?we(null):{},this.size=0}var Se=_e;function Ae(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var je=Ae,Oe="__lodash_hash_undefined__",ke=Object.prototype.hasOwnProperty;function Ee(e){var t=this.__data__;if(we){var r=t[e];return r===Oe?void 0:r}return ke.call(t,e)?t[e]:void 0}var Ce=Ee,Ie=Object.prototype.hasOwnProperty;function xe(e){var t=this.__data__;return we?void 0!==t[e]:Ie.call(t,e)}var Me=xe,Re="__lodash_hash_undefined__";function Pe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=we&&void 0===t?Re:t,this}var $e=Pe;function Ne(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ne.prototype.clear=Se,Ne.prototype.delete=je,Ne.prototype.get=Ce,Ne.prototype.has=Me,Ne.prototype.set=$e;var Te=Ne;function Le(){this.__data__=[],this.size=0}var Ue=Le;function ze(e,t){return e===t||e!=e&&t!=t}var Fe=ze;function De(e,t){for(var r=e.length;r--;)if(Fe(e[r][0],t))return r;return-1}var Be=De,qe=Array.prototype.splice;function Ve(e){var t=this.__data__,r=Be(t,e);return!(r<0||(r==t.length-1?t.pop():qe.call(t,r,1),--this.size,0))}var We=Ve;function He(e){var t=this.__data__,r=Be(t,e);return r<0?void 0:t[r][1]}var Ke=He;function Ze(e){return Be(this.__data__,e)>-1}var Je=Ze;function Ge(e,t){var r=this.__data__,n=Be(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Xe=Ge;function Qe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qe.prototype.clear=Ue,Qe.prototype.delete=We,Qe.prototype.get=Ke,Qe.prototype.has=Je,Qe.prototype.set=Xe;var Ye=Qe,et=be(b,"Map");function tt(){this.size=0,this.__data__={hash:new Te,map:new(et||Ye),string:new Te}}var rt=tt;function nt(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var ot=nt;function at(e,t){var r=e.__data__;return ot(t)?r["string"==typeof t?"string":"hash"]:r.map}var it=at;function st(e){var t=it(this,e).delete(e);return this.size-=t?1:0,t}var ct=st;function ut(e){return it(this,e).get(e)}var lt=ut;function ft(e){return it(this,e).has(e)}var pt=ft;function ht(e,t){var r=it(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var dt=ht;function mt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}mt.prototype.clear=rt,mt.prototype.delete=ct,mt.prototype.get=lt,mt.prototype.has=pt,mt.prototype.set=dt;var gt=mt,vt="Expected a function";function yt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(vt);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(yt.Cache||gt),r}yt.Cache=gt;var bt=yt,wt=500;function _t(e){var t=bt(e,(function(e){return r.size===wt&&r.clear(),e})),r=t.cache;return t}var St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,At=/\\(\\)?/g,jt=_t((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(St,(function(e,r,n,o){t.push(n?o.replace(At,"$1"):r||e)})),t}));function Ot(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var kt=Ot,Et=1/0,Ct=w?w.prototype:void 0,It=Ct?Ct.toString:void 0;function xt(e){if("string"==typeof e)return e;if(g(e))return kt(e,xt)+"";if(z(e))return It?It.call(e):"";var t=e+"";return"0"==t&&1/e==-Et?"-0":t}var Mt=xt;function Rt(e){return null==e?"":Mt(e)}var Pt=Rt;function $t(e,t){return g(e)?e:q(e,t)?[e]:jt(Pt(e))}var Nt=$t,Tt=1/0;function Lt(e){if("string"==typeof e||z(e))return e;var t=e+"";return"0"==t&&1/e==-Tt?"-0":t}var Ut=Lt;function zt(e,t){for(var r=0,n=(t=Nt(t,e)).length;null!=e&&r<n;)e=e[Ut(t[r++])];return r&&r==n?e:void 0}var Ft=zt;function Dt(e,t,r){var n=null==e?void 0:Ft(e,t);return void 0===n?r:n}var Bt=Dt,qt=function(){try{var e=be(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();function Vt(e,t,r){"__proto__"==t&&qt?qt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Wt=Vt,Ht=Object.prototype.hasOwnProperty;function Kt(e,t,r){var n=e[t];Ht.call(e,t)&&Fe(n,r)&&(void 0!==r||t in e)||Wt(e,t,r)}var Zt=Kt,Jt=9007199254740991,Gt=/^(?:0|[1-9]\d*)$/;function Xt(e,t){var r=typeof e;return!!(t=null==t?Jt:t)&&("number"==r||"symbol"!=r&&Gt.test(e))&&e>-1&&e%1==0&&e<t}var Qt=Xt;function Yt(e,t,r,n){if(!H(e))return e;for(var o=-1,a=(t=Nt(t,e)).length,i=a-1,s=e;null!=s&&++o<a;){var c=Ut(t[o]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=i){var l=s[c];void 0===(u=n?n(l,c,s):void 0)&&(u=H(l)?l:Qt(t[o+1])?[]:{})}Zt(s,c,u),s=s[c]}return e}var er=Yt;function tr(e,t,r){return null==e?e:er(e,t,r)}var rr=tr,nr="__lodash_hash_undefined__";function or(e){return this.__data__.set(e,nr),this}var ar=or;function ir(e){return this.__data__.has(e)}var sr=ir;function cr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new gt;++t<r;)this.add(e[t])}cr.prototype.add=cr.prototype.push=ar,cr.prototype.has=sr;var ur=cr;function lr(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}var fr=lr;function pr(e){return e!=e}var hr=pr;function dr(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}var mr=dr;function gr(e,t,r){return t==t?mr(e,t,r):fr(e,hr,r)}var vr=gr;function yr(e,t){return!(null==e||!e.length)&&vr(e,t,0)>-1}var br=yr;function wr(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}var _r=wr;function Sr(e,t){return e.has(t)}var Ar=Sr,jr=be(b,"Set");function Or(){}var kr=Or;function Er(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Cr=Er,Ir=1/0,xr=jr&&1/Cr(new jr([,-0]))[1]==Ir?function(e){return new jr(e)}:kr,Mr=200;function Rr(e,t,r){var n=-1,o=br,a=e.length,i=!0,s=[],c=s;if(r)i=!1,o=_r;else if(a>=Mr){var u=t?null:xr(e);if(u)return Cr(u);i=!1,o=Ar,c=new ur}else c=t?[]:s;e:for(;++n<a;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,i&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),s.push(l)}else o(c,f,r)||(c!==s&&c.push(f),s.push(l))}return s}var Pr=Rr;function $r(e){return e&&e.length?Pr(e):[]}var Nr=$r;function Tr(e){return function(t){return e(t)}}var Lr=Tr,Ur=Math.min;function zr(e,t,r){for(var n=r?_r:br,o=e[0].length,a=e.length,i=a,s=Array(a),c=1/0,u=[];i--;){var l=e[i];i&&t&&(l=kt(l,Lr(t))),c=Ur(l.length,c),s[i]=!r&&(t||o>=120&&l.length>=120)?new ur(i&&l):void 0}l=e[0];var f=-1,p=s[0];e:for(;++f<o&&u.length<c;){var h=l[f],d=t?t(h):h;if(h=r||0!==h?h:0,!(p?Ar(p,d):n(u,d,r))){for(i=a;--i;){var m=s[i];if(!(m?Ar(m,d):n(e[i],d,r)))continue e}p&&p.push(d),u.push(h)}}return u}var Fr=zr;function Dr(e){return e}var Br=Dr;function qr(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Vr=qr,Wr=Math.max;function Hr(e,t,r){return t=Wr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Wr(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),Vr(e,this,s)}}var Kr=Hr;function Zr(e){return function(){return e}}var Jr=Zr,Gr=qt?function(e,t){return qt(e,"toString",{configurable:!0,enumerable:!1,value:Jr(t),writable:!0})}:Br,Xr=800,Qr=16,Yr=Date.now;function en(e){var t=0,r=0;return function(){var n=Yr(),o=Qr-(n-r);if(r=n,o>0){if(++t>=Xr)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var tn=en(Gr);function rn(e,t){return tn(Kr(e,t,Br),e+"")}var nn=rn,on=9007199254740991;function an(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=on}var sn=an;function cn(e){return null!=e&&sn(e.length)&&!Y(e)}var un=cn;function ln(e){return T(e)&&un(e)}var fn=ln;function pn(e){return fn(e)?e:[]}var hn=pn,dn=nn((function(e){var t=kt(e,hn);return t.length&&t[0]===e[0]?Fr(t):[]}));function mn(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var gn=mn,vn="[object Arguments]";function yn(e){return T(e)&&$(e)==vn}var bn=yn,wn=Object.prototype,_n=wn.hasOwnProperty,Sn=wn.propertyIsEnumerable,An=bn(function(){return arguments}())?bn:function(e){return T(e)&&_n.call(e,"callee")&&!Sn.call(e,"callee")},jn=w?w.isConcatSpreadable:void 0;function On(e){return g(e)||An(e)||!!(jn&&e&&e[jn])}var kn=On;function En(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=kn),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?En(s,t-1,r,n,o):gn(o,s):n||(o[o.length]=s)}return o}var Cn=En,In=nn((function(e){return Pr(Cn(e,1,fn,!0))}));function xn(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var c=i[e?s:++o];if(!1===r(a[c],c,a))break}return t}}var Mn=xn();function Rn(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Pn=Rn;function $n(){return!1}var Nn=$n,Tn=d((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?b.Buffer:void 0,a=(o?o.isBuffer:void 0)||Nn;e.exports=a})),Ln="[object Arguments]",Un="[object Array]",zn="[object Boolean]",Fn="[object Date]",Dn="[object Error]",Bn="[object Function]",qn="[object Map]",Vn="[object Number]",Wn="[object Object]",Hn="[object RegExp]",Kn="[object Set]",Zn="[object String]",Jn="[object WeakMap]",Gn="[object ArrayBuffer]",Xn="[object DataView]",Qn="[object Float64Array]",Yn="[object Int8Array]",eo="[object Int16Array]",to="[object Int32Array]",ro="[object Uint8Array]",no="[object Uint8ClampedArray]",oo="[object Uint16Array]",ao="[object Uint32Array]",io={};function so(e){return T(e)&&sn(e.length)&&!!io[$(e)]}io["[object Float32Array]"]=io[Qn]=io[Yn]=io[eo]=io[to]=io[ro]=io[no]=io[oo]=io[ao]=!0,io[Ln]=io[Un]=io[Gn]=io[zn]=io[Xn]=io[Fn]=io[Dn]=io[Bn]=io[qn]=io[Vn]=io[Wn]=io[Hn]=io[Kn]=io[Zn]=io[Jn]=!1;var co=so,uo=d((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&v.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=a})),lo=uo&&uo.isTypedArray,fo=lo?Lr(lo):co,po=Object.prototype.hasOwnProperty;function ho(e,t){var r=g(e),n=!r&&An(e),o=!r&&!n&&Tn(e),a=!r&&!n&&!o&&fo(e),i=r||n||o||a,s=i?Pn(e.length,String):[],c=s.length;for(var u in e)!t&&!po.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Qt(u,c))||s.push(u);return s}var mo=ho,go=Object.prototype;function vo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||go)}var yo=vo;function bo(e,t){return function(r){return e(t(r))}}var wo=bo,_o=wo(Object.keys,Object),So=Object.prototype.hasOwnProperty;function Ao(e){if(!yo(e))return _o(e);var t=[];for(var r in Object(e))So.call(e,r)&&"constructor"!=r&&t.push(r);return t}var jo=Ao;function Oo(e){return un(e)?mo(e):jo(e)}var ko=Oo;function Eo(e,t){return e&&Mn(e,t,ko)}var Co=Eo;function Io(e){return"function"==typeof e?e:Br}var xo=Io;function Mo(e,t){return e&&Co(e,xo(t))}var Ro=Mo,Po="[object String]";function $o(e){return"string"==typeof e||!g(e)&&T(e)&&$(e)==Po}var No=$o,To=be(b,"DataView"),Lo=be(b,"Promise"),Uo=be(b,"WeakMap"),zo="[object Map]",Fo="[object Object]",Do="[object Promise]",Bo="[object Set]",qo="[object WeakMap]",Vo="[object DataView]",Wo=ie(To),Ho=ie(et),Ko=ie(Lo),Zo=ie(jr),Jo=ie(Uo),Go=$;(To&&Go(new To(new ArrayBuffer(1)))!=Vo||et&&Go(new et)!=zo||Lo&&Go(Lo.resolve())!=Do||jr&&Go(new jr)!=Bo||Uo&&Go(new Uo)!=qo)&&(Go=function(e){var t=$(e),r=t==Fo?e.constructor:void 0,n=r?ie(r):"";if(n)switch(n){case Wo:return Vo;case Ho:return zo;case Ko:return Do;case Zo:return Bo;case Jo:return qo}return t});var Xo=Go,Qo="[object Map]",Yo="[object Set]",ea=Object.prototype.hasOwnProperty;function ta(e){if(null==e)return!0;if(un(e)&&(g(e)||"string"==typeof e||"function"==typeof e.splice||Tn(e)||fo(e)||An(e)))return!e.length;var t=Xo(e);if(t==Qo||t==Yo)return!e.size;if(yo(e))return!jo(e).length;for(var r in e)if(ea.call(e,r))return!1;return!0}var ra=ta;function na(){this.__data__=new Ye,this.size=0}var oa=na;function aa(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var ia=aa;function sa(e){return this.__data__.get(e)}var ca=sa;function ua(e){return this.__data__.has(e)}var la=ua,fa=200;function pa(e,t){var r=this.__data__;if(r instanceof Ye){var n=r.__data__;if(!et||n.length<fa-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new gt(n)}return r.set(e,t),this.size=r.size,this}var ha=pa;function da(e){var t=this.__data__=new Ye(e);this.size=t.size}da.prototype.clear=oa,da.prototype.delete=ia,da.prototype.get=ca,da.prototype.has=la,da.prototype.set=ha;var ma=da;function ga(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var va=ga,ya=1,ba=2;function wa(e,t,r,n,o,a){var i=r&ya,s=e.length,c=t.length;if(s!=c&&!(i&&c>s))return!1;var u=a.get(e),l=a.get(t);if(u&&l)return u==t&&l==e;var f=-1,p=!0,h=r&ba?new ur:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var d=e[f],m=t[f];if(n)var g=i?n(m,d,f,t,e,a):n(d,m,f,e,t,a);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!va(t,(function(e,t){if(!Ar(h,t)&&(d===e||o(d,e,r,n,a)))return h.push(t)}))){p=!1;break}}else if(d!==m&&!o(d,m,r,n,a)){p=!1;break}}return a.delete(e),a.delete(t),p}var _a=wa,Sa=b.Uint8Array;function Aa(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}var ja=Aa,Oa=1,ka=2,Ea="[object Boolean]",Ca="[object Date]",Ia="[object Error]",xa="[object Map]",Ma="[object Number]",Ra="[object RegExp]",Pa="[object Set]",$a="[object String]",Na="[object Symbol]",Ta="[object ArrayBuffer]",La="[object DataView]",Ua=w?w.prototype:void 0,za=Ua?Ua.valueOf:void 0;function Fa(e,t,r,n,o,a,i){switch(r){case La:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ta:return!(e.byteLength!=t.byteLength||!a(new Sa(e),new Sa(t)));case Ea:case Ca:case Ma:return Fe(+e,+t);case Ia:return e.name==t.name&&e.message==t.message;case Ra:case $a:return e==t+"";case xa:var s=ja;case Pa:var c=n&Oa;if(s||(s=Cr),e.size!=t.size&&!c)return!1;var u=i.get(e);if(u)return u==t;n|=ka,i.set(e,t);var l=_a(s(e),s(t),n,o,a,i);return i.delete(e),l;case Na:if(za)return za.call(e)==za.call(t)}return!1}var Da=Fa;function Ba(e,t,r){var n=t(e);return g(e)?n:gn(n,r(e))}var qa=Ba;function Va(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}var Wa=Va;function Ha(){return[]}var Ka=Ha,Za=Object.prototype.propertyIsEnumerable,Ja=Object.getOwnPropertySymbols,Ga=Ja?function(e){return null==e?[]:(e=Object(e),Wa(Ja(e),(function(t){return Za.call(e,t)})))}:Ka;function Xa(e){return qa(e,ko,Ga)}var Qa=Xa,Ya=1,ei=Object.prototype.hasOwnProperty;function ti(e,t,r,n,o,a){var i=r&Ya,s=Qa(e),c=s.length;if(c!=Qa(t).length&&!i)return!1;for(var u=c;u--;){var l=s[u];if(!(i?l in t:ei.call(t,l)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var h=!0;a.set(e,t),a.set(t,e);for(var d=i;++u<c;){var m=e[l=s[u]],g=t[l];if(n)var v=i?n(g,m,l,t,e,a):n(m,g,l,e,t,a);if(!(void 0===v?m===g||o(m,g,r,n,a):v)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return a.delete(e),a.delete(t),h}var ri=ti,ni=1,oi="[object Arguments]",ai="[object Array]",ii="[object Object]",si=Object.prototype.hasOwnProperty;function ci(e,t,r,n,o,a){var i=g(e),s=g(t),c=i?ai:Xo(e),u=s?ai:Xo(t),l=(c=c==oi?ii:c)==ii,f=(u=u==oi?ii:u)==ii,p=c==u;if(p&&Tn(e)){if(!Tn(t))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new ma),i||fo(e)?_a(e,t,r,n,o,a):Da(e,t,c,r,n,o,a);if(!(r&ni)){var h=l&&si.call(e,"__wrapped__"),d=f&&si.call(t,"__wrapped__");if(h||d){var m=h?e.value():e,v=d?t.value():t;return a||(a=new ma),o(m,v,r,n,a)}}return!!p&&(a||(a=new ma),ri(e,t,r,n,o,a))}var ui=ci;function li(e,t,r,n,o){return e===t||(null==e||null==t||!T(e)&&!T(t)?e!=e&&t!=t:ui(e,t,r,n,li,o))}var fi=li;function pi(e,t){return fi(e,t)}var hi=pi;function di(e,t,r){(void 0!==r&&!Fe(e[t],r)||void 0===r&&!(t in e))&&Wt(e,t,r)}var mi=di,gi=d((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?b.Buffer:void 0,a=o?o.allocUnsafe:void 0;function i(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}e.exports=i}));function vi(e){var t=new e.constructor(e.byteLength);return new Sa(t).set(new Sa(e)),t}var yi=vi;function bi(e,t){var r=t?yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var wi=bi;function _i(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Si=_i,Ai=Object.create,ji=function(){function e(){}return function(t){if(!H(t))return{};if(Ai)return Ai(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Oi=wo(Object.getPrototypeOf,Object);function ki(e){return"function"!=typeof e.constructor||yo(e)?{}:ji(Oi(e))}var Ei=ki,Ci="[object Object]",Ii=Function.prototype,xi=Object.prototype,Mi=Ii.toString,Ri=xi.hasOwnProperty,Pi=Mi.call(Object);function $i(e){if(!T(e)||$(e)!=Ci)return!1;var t=Oi(e);if(null===t)return!0;var r=Ri.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Mi.call(r)==Pi}var Ni=$i;function Ti(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Li=Ti;function Ui(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),o?Wt(r,s,c):Zt(r,s,c)}return r}var zi=Ui;function Fi(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var Di=Fi,Bi=Object.prototype.hasOwnProperty;function qi(e){if(!H(e))return Di(e);var t=yo(e),r=[];for(var n in e)("constructor"!=n||!t&&Bi.call(e,n))&&r.push(n);return r}var Vi=qi;function Wi(e){return un(e)?mo(e,!0):Vi(e)}var Hi=Wi;function Ki(e){return zi(e,Hi(e))}var Zi=Ki;function Ji(e,t,r,n,o,a,i){var s=Li(e,r),c=Li(t,r),u=i.get(c);if(u)mi(e,r,u);else{var l=a?a(s,c,r+"",e,t,i):void 0,f=void 0===l;if(f){var p=g(c),h=!p&&Tn(c),d=!p&&!h&&fo(c);l=c,p||h||d?g(s)?l=s:fn(s)?l=Si(s):h?(f=!1,l=gi(c,!0)):d?(f=!1,l=wi(c,!0)):l=[]:Ni(c)||An(c)?(l=s,An(s)?l=Zi(s):H(s)&&!Y(s)||(l=Ei(c))):f=!1}f&&(i.set(c,l),o(l,c,n,a,i),i.delete(c)),mi(e,r,l)}}var Gi=Ji;function Xi(e,t,r,n,o){e!==t&&Mn(t,(function(a,i){if(o||(o=new ma),H(a))Gi(e,t,i,r,Xi,n,o);else{var s=n?n(Li(e,i),a,i+"",e,t,o):void 0;void 0===s&&(s=a),mi(e,i,s)}}),Hi)}var Qi=Xi;function Yi(e,t,r){if(!H(r))return!1;var n=typeof t;return!!("number"==n?un(r)&&Qt(t,r.length):"string"==n&&t in r)&&Fe(r[t],e)}var es=Yi;function ts(e){return nn((function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,i&&es(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t}))}var rs=ts((function(e,t,r){Qi(e,t,r)}));function ns(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var os=ns;function as(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var is=as;function ss(e,t){return e&&zi(t,ko(t),e)}var cs=ss;function us(e,t){return e&&zi(t,Hi(t),e)}var ls=us;function fs(e,t){return zi(e,Ga(e),t)}var ps=fs,hs=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)gn(t,Ga(e)),e=Oi(e);return t}:Ka;function ds(e,t){return zi(e,hs(e),t)}var ms=ds;function gs(e){return qa(e,Hi,hs)}var vs=gs,ys=Object.prototype.hasOwnProperty;function bs(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&ys.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ws=bs;function _s(e,t){var r=t?yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Ss=_s,As=/\w*$/;function js(e){var t=new e.constructor(e.source,As.exec(e));return t.lastIndex=e.lastIndex,t}var Os=js,ks=w?w.prototype:void 0,Es=ks?ks.valueOf:void 0;function Cs(e){return Es?Object(Es.call(e)):{}}var Is=Cs,xs="[object Boolean]",Ms="[object Date]",Rs="[object Map]",Ps="[object Number]",$s="[object RegExp]",Ns="[object Set]",Ts="[object String]",Ls="[object Symbol]",Us="[object ArrayBuffer]",zs="[object DataView]",Fs="[object Float32Array]",Ds="[object Float64Array]",Bs="[object Int8Array]",qs="[object Int16Array]",Vs="[object Int32Array]",Ws="[object Uint8Array]",Hs="[object Uint8ClampedArray]",Ks="[object Uint16Array]",Zs="[object Uint32Array]";function Js(e,t,r){var n=e.constructor;switch(t){case Us:return yi(e);case xs:case Ms:return new n(+e);case zs:return Ss(e,r);case Fs:case Ds:case Bs:case qs:case Vs:case Ws:case Hs:case Ks:case Zs:return wi(e,r);case Rs:return new n;case Ps:case Ts:return new n(e);case $s:return Os(e);case Ns:return new n;case Ls:return Is(e)}}var Gs=Js,Xs="[object Map]";function Qs(e){return T(e)&&Xo(e)==Xs}var Ys=Qs,ec=uo&&uo.isMap,tc=ec?Lr(ec):Ys,rc="[object Set]";function nc(e){return T(e)&&Xo(e)==rc}var oc=nc,ac=uo&&uo.isSet,ic=ac?Lr(ac):oc,sc=1,cc=2,uc=4,lc="[object Arguments]",fc="[object Array]",pc="[object Boolean]",hc="[object Date]",dc="[object Error]",mc="[object Function]",gc="[object GeneratorFunction]",vc="[object Map]",yc="[object Number]",bc="[object Object]",wc="[object RegExp]",_c="[object Set]",Sc="[object String]",Ac="[object Symbol]",jc="[object WeakMap]",Oc="[object ArrayBuffer]",kc="[object DataView]",Ec="[object Float32Array]",Cc="[object Float64Array]",Ic="[object Int8Array]",xc="[object Int16Array]",Mc="[object Int32Array]",Rc="[object Uint8Array]",Pc="[object Uint8ClampedArray]",$c="[object Uint16Array]",Nc="[object Uint32Array]",Tc={};function Lc(e,t,r,n,o,a){var i,s=t&sc,c=t&cc,u=t&uc;if(r&&(i=o?r(e,n,o,a):r(e)),void 0!==i)return i;if(!H(e))return e;var l=g(e);if(l){if(i=ws(e),!s)return Si(e,i)}else{var f=Xo(e),p=f==mc||f==gc;if(Tn(e))return gi(e,s);if(f==bc||f==lc||p&&!o){if(i=c||p?{}:Ei(e),!s)return c?ms(e,ls(i,e)):ps(e,cs(i,e))}else{if(!Tc[f])return o?e:{};i=Gs(e,f,s)}}a||(a=new ma);var h=a.get(e);if(h)return h;a.set(e,i),ic(e)?e.forEach((function(n){i.add(Lc(n,t,r,n,e,a))})):tc(e)&&e.forEach((function(n,o){i.set(o,Lc(n,t,r,o,e,a))}));var d=l?void 0:(u?c?vs:Qa:c?Hi:ko)(e);return is(d||e,(function(n,o){d&&(n=e[o=n]),Zt(i,o,Lc(n,t,r,o,e,a))})),i}Tc[lc]=Tc[fc]=Tc[Oc]=Tc[kc]=Tc[pc]=Tc[hc]=Tc[Ec]=Tc[Cc]=Tc[Ic]=Tc[xc]=Tc[Mc]=Tc[vc]=Tc[yc]=Tc[bc]=Tc[wc]=Tc[_c]=Tc[Sc]=Tc[Ac]=Tc[Rc]=Tc[Pc]=Tc[$c]=Tc[Nc]=!0,Tc[dc]=Tc[mc]=Tc[jc]=!1;var Uc=Lc;function zc(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}var Fc=zc;function Dc(e,t){return t.length<2?e:Ft(e,Fc(t,0,-1))}var Bc=Dc;function qc(e,t){return t=Nt(t,e),null==(e=Bc(e,t))||delete e[Ut(os(t))]}var Vc=qc;function Wc(e){return Ni(e)?void 0:e}var Hc=Wc;function Kc(e){return null!=e&&e.length?Cn(e,1):[]}var Zc=Kc;function Jc(e){return tn(Kr(e,void 0,Zc),e+"")}var Gc=1,Xc=2,Qc=4,Yc=Jc((function(e,t){var r={};if(null==e)return r;var n=!1;t=kt(t,(function(t){return t=Nt(t,e),n||(n=t.length>1),t})),zi(e,vs(e),r),n&&(r=Uc(r,Gc|Xc|Qc,Hc));for(var o=t.length;o--;)Vc(r,t[o]);return r}));function eu(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return gn(g(r)?Si(r):[r],Cn(t,1))}var tu={get:Bt,set:rr,uniq:Nr,intersection:dn,union:In,forOwn:Ro,isArray:g,isObject:H,isString:No,isEmpty:ra,isEqual:hi,merge:rs,last:os,omit:Yc,concat:eu},ru=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},nu=Object.prototype.toString;function ou(e){return"[object Array]"===nu.call(e)}function au(e){return void 0===e}function iu(e){return null!==e&&!au(e)&&null!==e.constructor&&!au(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function su(e){return"[object ArrayBuffer]"===nu.call(e)}function cu(e){return"undefined"!=typeof FormData&&e instanceof FormData}function uu(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function lu(e){return"string"==typeof e}function fu(e){return"number"==typeof e}function pu(e){return null!==e&&"object"==typeof e}function hu(e){if("[object Object]"!==nu.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function du(e){return"[object Date]"===nu.call(e)}function mu(e){return"[object File]"===nu.call(e)}function gu(e){return"[object Blob]"===nu.call(e)}function vu(e){return"[object Function]"===nu.call(e)}function yu(e){return pu(e)&&vu(e.pipe)}function bu(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function wu(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function _u(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document}function Su(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),ou(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function Au(){var e={};function t(t,r){hu(e[r])&&hu(t)?e[r]=Au(e[r],t):hu(t)?e[r]=Au({},t):ou(t)?e[r]=t.slice():e[r]=t}for(var r=0,n=arguments.length;r<n;r++)Su(arguments[r],t);return e}function ju(e,t,r){return Su(t,(function(t,n){e[n]=r&&"function"==typeof t?ru(t,r):t})),e}function Ou(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}var ku={isArray:ou,isArrayBuffer:su,isBuffer:iu,isFormData:cu,isArrayBufferView:uu,isString:lu,isNumber:fu,isObject:pu,isPlainObject:hu,isUndefined:au,isDate:du,isFile:mu,isBlob:gu,isFunction:vu,isStream:yu,isURLSearchParams:bu,isStandardBrowserEnv:_u,forEach:Su,merge:Au,extend:ju,trim:wu,stripBOM:Ou};function Eu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Cu=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(ku.isURLSearchParams(t))n=t.toString();else{var o=[];ku.forEach(t,(function(e,t){null!=e&&(ku.isArray(e)?t+="[]":e=[e],ku.forEach(e,(function(e){ku.isDate(e)?e=e.toISOString():ku.isObject(e)&&(e=JSON.stringify(e)),o.push(Eu(t)+"="+Eu(e))})))})),n=o.join("&")}if(n){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e};function Iu(){this.handlers=[]}Iu.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Iu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Iu.prototype.forEach=function(e){ku.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var xu=Iu,Mu=function(e,t,r){return ku.forEach(r,(function(r){e=r(e,t)})),e},Ru=function(e){return!(!e||!e.__CANCEL__)},Pu=function(e,t){ku.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},$u=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Nu=function(e,t,r,n,o){var a=new Error(e);return $u(a,t,r,n,o)},Tu=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(Nu("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},Lu=ku.isStandardBrowserEnv()?{write:function(e,t,r,n,o,a){var i=[];i.push(e+"="+encodeURIComponent(t)),ku.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),ku.isString(n)&&i.push("path="+n),ku.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Uu=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},zu=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Fu=function(e,t){return e&&!Uu(t)?zu(e,t):t},Du=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Bu=function(e){var t,r,n,o={};return e?(ku.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=ku.trim(e.substr(0,n)).toLowerCase(),r=ku.trim(e.substr(n+1)),t){if(o[t]&&Du.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o},qu=ku.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=ku.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},Vu=function(e){return new Promise((function(t,r){var n=e.data,o=e.headers;ku.isFormData(n)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var i=e.auth.username||"",s=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(i+":"+s)}var c=Fu(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),Cu(c,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in a?Bu(a.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:n,config:e,request:a};Tu(t,r,o),a=null}},a.onabort=function(){a&&(r(Nu("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(Nu("Network Error",e,null,a)),a=null},a.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(Nu(t,e,"ECONNABORTED",a)),a=null},ku.isStandardBrowserEnv()){var u=(e.withCredentials||qu(c))&&e.xsrfCookieName?Lu.read(e.xsrfCookieName):void 0;u&&(o[e.xsrfHeaderName]=u)}if("setRequestHeader"in a&&ku.forEach(o,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)})),ku.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(l){if("json"!==e.responseType)throw l}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),r(e),a=null)})),n||(n=null),a.send(n)}))},Wu={"Content-Type":"application/x-www-form-urlencoded"};function Hu(e,t){!ku.isUndefined(e)&&ku.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Ku(){var e;return("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=Vu),e}var Zu={adapter:Ku(),transformRequest:[function(e,t){return Pu(t,"Accept"),Pu(t,"Content-Type"),ku.isFormData(e)||ku.isArrayBuffer(e)||ku.isBuffer(e)||ku.isStream(e)||ku.isFile(e)||ku.isBlob(e)?e:ku.isArrayBufferView(e)?e.buffer:ku.isURLSearchParams(e)?(Hu(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ku.isObject(e)?(Hu(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ku.forEach(["delete","get","head"],(function(e){Zu.headers[e]={}})),ku.forEach(["post","put","patch"],(function(e){Zu.headers[e]=ku.merge(Wu)}));var Ju=Zu;function Gu(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Xu=function(e){return Gu(e),e.headers=e.headers||{},e.data=Mu(e.data,e.headers,e.transformRequest),e.headers=ku.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ku.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Ju.adapter)(e).then((function(t){return Gu(e),t.data=Mu(t.data,t.headers,e.transformResponse),t}),(function(t){return Ru(t)||(Gu(e),t&&t.response&&(t.response.data=Mu(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Qu=function(e,t){t=t||{};var r={},n=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function s(e,t){return ku.isPlainObject(e)&&ku.isPlainObject(t)?ku.merge(e,t):ku.isPlainObject(t)?ku.merge({},t):ku.isArray(t)?t.slice():t}function c(n){ku.isUndefined(t[n])?ku.isUndefined(e[n])||(r[n]=s(void 0,e[n])):r[n]=s(e[n],t[n])}ku.forEach(n,(function(e){ku.isUndefined(t[e])||(r[e]=s(void 0,t[e]))})),ku.forEach(o,c),ku.forEach(a,(function(n){ku.isUndefined(t[n])?ku.isUndefined(e[n])||(r[n]=s(void 0,e[n])):r[n]=s(void 0,t[n])})),ku.forEach(i,(function(n){n in t?r[n]=s(e[n],t[n]):n in e&&(r[n]=s(void 0,e[n]))}));var u=n.concat(o).concat(a).concat(i),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return ku.forEach(l,c),r};function Yu(e){this.defaults=e,this.interceptors={request:new xu,response:new xu}}Yu.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Qu(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Xu,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},Yu.prototype.getUri=function(e){return e=Qu(this.defaults,e),Cu(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},ku.forEach(["delete","get","head","options"],(function(e){Yu.prototype[e]=function(t,r){return this.request(Qu(r||{},{method:e,url:t,data:(r||{}).data}))}})),ku.forEach(["post","put","patch"],(function(e){Yu.prototype[e]=function(t,r,n){return this.request(Qu(n||{},{method:e,url:t,data:r}))}}));var el=Yu;function tl(e){this.message=e}tl.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},tl.prototype.__CANCEL__=!0;var rl=tl;function nl(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new rl(e),t(r.reason))}))}nl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},nl.source=function(){var e;return{token:new nl((function(t){e=t})),cancel:e}};var ol=nl,al=function(e){return function(t){return e.apply(null,t)}},il=function(e){return"object"==typeof e&&!0===e.isAxiosError};function sl(e){var t=new el(e),r=ru(el.prototype.request,t);return ku.extend(r,el.prototype,t),ku.extend(r,t),r}var cl=sl(Ju);cl.Axios=el,cl.create=function(e){return sl(Qu(cl.defaults,e))},cl.Cancel=rl,cl.CancelToken=ol,cl.isCancel=Ru,cl.all=function(e){return Promise.all(e)},cl.spread=al,cl.isAxiosError=il;var ul=cl,ll=cl;ul.default=ll;var fl=ul;function pl(...e){let[t,...r]=e;for(let n of r)t.endsWith("/")||(t+="/"),n.startsWith("/")&&(n=n.slice(1)),t+=n;return t}function hl(e,t){return e._totalCount=t._totalCount,e._url=t._url,e}var dl={requestMethods:[{method:"getRegistries",fallback:[],type:"Registries"},{method:"getSchemes",fallback:[],type:"Schemes"},{method:"vocSearch",fallback:[],type:"Schemes"},{method:"getTypes",fallback:[],type:"Types"},{method:"suggest",fallback:["",[],[],[]]},{method:"vocSuggest",fallback:["",[],[],[]]},{method:"getConcordances",fallback:[],type:"Concordances"},{method:"getOccurrences",fallback:[],type:"Occurrences"},{method:"getTop",fallback:[],type:"Concepts"},{method:"getConcepts",fallback:[],type:"Concepts"},{method:"getNarrower",fallback:[],type:"Concepts"},{method:"getAncestors",fallback:[],type:"Concepts"},{method:"search",fallback:[],type:"Concepts"},{method:"getMapping",fallback:null,type:"Mapping"},{method:"getMappings",fallback:[],type:"Mappings"},{method:"postMapping",fallback:null,type:"Mapping"},{method:"postMappings",fallback:[],type:"Mapping"},{method:"putMapping",fallback:null,type:"Mapping"},{method:"patchMapping",fallback:null,type:"Mapping"},{method:"deleteMapping",fallback:!1},{method:"deleteMappings",fallback:[]},{method:"getAnnotations",fallback:[],type:"Annotations"},{method:"postAnnotation",fallback:null,type:"Annotation"},{method:"putAnnotation",fallback:null,type:"Annotation"},{method:"patchAnnotation",fallback:null,type:"Annotation"},{method:"deleteAnnotation",fallback:!1}],concatUrl:pl,withCustomProps:hl};class ml{constructor(e={}){this._jskos=e,this.axios=fl.create({timeout:2e4}),this._path="undefined"!=typeof window&&window.location.pathname,this.has={},this._defaultLanguages="en,de,fr,es,nl,it,fi,pl,ru,cs,jp".split(","),this.languages=[],this._auth={key:null,bearerToken:null},this._repeating=[],this._api={status:e.status,schemes:e.schemes,top:e.top,data:e.data,concepts:e.concepts,narrower:e.narrower,ancestors:e.ancestors,types:e.types,suggest:e.suggest,search:e.search,"voc-suggest":e["voc-suggest"],"voc-search":e["voc-search"],mappings:e.mappings,concordances:e.concordances,annotations:e.annotations,occurrences:e.occurrences,reconcile:e.reconcile,api:e.api},this._config={},this.setRetryConfig(),this.axios.interceptors.request.use((e=>{const t=tu.uniq([].concat(tu.get(e,"params.language","").split(","),this.languages,this._defaultLanguages).filter((e=>""!=e))).join(",");if(tu.set(e,"params.language",t),this.has.auth&&this._auth.bearerToken&&!tu.get(e,"headers.Authorization")&&tu.set(e,"headers.Authorization",`Bearer ${this._auth.bearerToken}`),e.url.startsWith("http:")&&"undefined"!=typeof window&&"https:"==window.location.protocol)throw new fl.Cancel("Can't call http API from https.");return e})),this.axios.interceptors.response.use((({data:e,headers:t={},config:r={}})=>{e=m.normalize(e);let n=r.url;if(n.endsWith("?")||(n+="?"),tu.forOwn(r.params||{},((e,t)=>{n+=`${t}=${encodeURIComponent(e)}&`})),tu.isArray(e)||tu.isObject(e)){let r=parseInt(t["x-total-count"]);isNaN(r)||(e._totalCount=r),e._url=n}return e}),(e=>{const t=tu.get(e,"config._retryCount",0),r=tu.get(e,"config.method"),n=tu.get(e,"response.status");return this._retryConfig.methods.includes(r)&&this._retryConfig.statusCodes.includes(n)&&t<this._retryConfig.count?(e.config._retryCount=t+1,e.config.data&&(e.config.data=JSON.parse(e.config.data)),new Promise(((r,n)=>{setTimeout((()=>{this.axios(e.config).then(r).catch(n)}),(()=>{const e=this._retryConfig.delay;return"function"==typeof e?e(t):e})())}))):Promise.reject(e)}));const t=[];for(let{method:r,type:n}of dl.requestMethods){const e=this[r]&&this[r].bind(this);this[r]=e?(o={})=>{if(o._raw)return delete o._raw,e(o);const a=t.find((e=>e.method==r&&tu.isEqual(e.options,o)));if(a)return a.promise;let i;o.cancelToken||(i=this.getCancelTokenSource(),o.cancelToken=i.token);const s=this.init().then((()=>e(o))).then((e=>(tu.isArray(e)&&void 0===e._totalCount?e._totalCount=e.length:tu.isObject(e)&&void 0===e._totalCount&&(e._totalCount=1),e&&n&&this[`adjust${n}`]&&(e=this[`adjust${n}`](e)),e))).catch((e=>{if(e instanceof f.CDKError)throw e;if(e.response)throw e.response.status.toString().startsWith(4)?new f.InvalidRequestError({relatedError:e,code:e.response.status}):new f.BackendError({relatedError:e,code:e.response.status});if(e.request){if("undefined"!=typeof navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection))throw new f.BackendUnavailableError({relatedError:e});throw new f.NetworkError({relatedError:e})}throw new f.CDKError({relatedError:e})}));i&&(s.cancel=(...e)=>i.cancel(...e));const c={method:r,options:tu.omit(o,["cancelToken"]),promise:s};return t.push(c),s.catch((()=>{})).then((()=>t.splice(t.indexOf(c),1))),s}:()=>{throw new f.MethodNotImplementedError({method:r})}}}get uri(){return this._jskos.uri}get notation(){return this._jskos.notation}get prefLabel(){return this._jskos.prefLabel}get definition(){return this._jskos.definition}get schemes(){return this._jskos.schemes}get excludedSchemes(){return this._jskos.excludedSchemes}get stored(){return void 0!==this._jskos.stored?this._jskos.stored:this.constructor.stored}async init(){return this._init||(this._init=(async()=>{let e;if(this._prepare(),tu.isString(this._api.status))try{e=await this.axios({method:"get",url:this._api.status})}catch(t){404===tu.get(t,"response.status")&&(this._api.status=null)}else e=this._api.status;if(tu.isObject(e)&&!tu.isEmpty(e)){this._config=e.config||{};for(let t of Object.keys(this._api))void 0===this._api[t]&&(this._api[t]=e[t]||null)}this._setup()})()),this._init}_prepare(){}_setup(){}getCancelTokenSource(){return fl.CancelToken.source()}setAuth({key:e=this._auth.key,bearerToken:t=this._auth.bearerToken}){this._auth.key=e,this._auth.bearerToken=t}setRetryConfig(e={}){this._retryConfig=Object.assign({methods:["get","head","options"],statusCodes:[401,403],count:3,delay:e=>300*e},e)}isAuthorizedFor({type:e,action:t,user:r,crossUser:n}){if("read"==t&&!0===this.has[e])return!0;if(!this.has[e])return!1;const o=tu.get(this._config,`${e}.${t}`);if(!o)return!!this.has[e][t];if(o.auth&&(!r||!this._auth.key))return!1;if(o.auth&&this._auth.key!=tu.get(this._config,"auth.key"))return!1;if(o.auth&&o.identities){const e=[r.uri].concat(Object.values(r.identities||{}).map((e=>e.uri))).filter((e=>null!=e));if(0==tu.intersection(e,o.identities).length)return!1}if(o.auth&&o.identityProviders){const e=Object.keys(r&&r.identities||{});if(0==tu.intersection(e,o.identityProviders).length)return!1}return n?!!o.crossUser:!!this.has[e][t]}supportsScheme(e){if(!e)return!1;let t=tu.isArray(this.schemes)?this.schemes:null;return null==t&&!m.isContainedIn(e,this.excludedSchemes||[])||m.isContainedIn(e,t)}adjustConcept(e){e._getNarrower=t=>this.getNarrower(a(a({},t),{concept:e})),e._getAncestors=t=>this.getAncestors(a(a({},t),{concept:e})),e._getDetails=async t=>(await this.getConcepts(a(a({},t),{concepts:[e]})))[0];for(let t of["broader","narrower","ancestors"])Array.isArray(e[t])&&!e[t].includes(null)&&(e[t]=this.adjustConcepts(e[t]));return e._registry=this,e}adjustConcepts(e){return dl.withCustomProps(e.map((e=>this.adjustConcept(e))),e)}adjustRegistries(e){return e}adjustSchemes(e){for(let t of e)t._getTop=e=>this.getTop(a(a({},e),{scheme:t})),t._getTypes=e=>this.getTypes(a(a({},e),{scheme:t})),t._registry=this,t._suggest=e=>{var{search:r}=e,n=i(e,["search"]);return this.suggest(a(a({},n),{search:r,scheme:t}))};return e}adjustConcordances(e){for(let t of e)t._registry=this;return e}adjustMapping(e){for(let t of["from","to"]){let r=`${t}Scheme`;e[r]||(e[r]=tu.get(m.conceptsOfMapping(e,t),"[0].inScheme[0]",null))}if(e._registry=this,!e.identifier){let t=tu.get(m.addMappingIdentifiers(e),"identifier");t&&(e.identifier=t)}return e}adjustMappings(e){return dl.withCustomProps(e.map((e=>this.adjustMapping(e))),e)}async postMappings(e={}){var{mappings:t}=e,r=i(e,["mappings"]);if(!t||!t.length)throw new f.InvalidOrMissingParameterError({parameter:"mappings"});return Promise.all(t.map((e=>this.postMapping(a(a({mapping:e},r),{_raw:!0})))))}async deleteMappings(e={}){var{mappings:t}=e,r=i(e,["mappings"]);if(!t||!t.length)throw new f.InvalidOrMissingParameterError({parameter:"mappings"});return Promise.all(t.map((e=>this.deleteMapping(a(a({mapping:e},r),{_raw:!0})))))}}ml.providerName="Base";var gl=ml;function vl(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var yl=vl();function bl(){try{if(!yl||!yl.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(r){return!1}}function wl(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}var _l=Promise;function Sl(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function Al(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function jl(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}function Ol(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}const kl="local-forage-detect-blob-support";let El;const Cl={},Il=Object.prototype.toString,xl="readonly",Ml="readwrite";function Rl(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}function Pl(e){return new _l((function(t){var r=e.transaction(kl,Ml),n=wl([""]);r.objectStore(kl).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function $l(e){return"boolean"==typeof El?_l.resolve(El):Pl(e).then((function(e){return El=e,El}))}function Nl(e){var t=Cl[e.name],r={};r.promise=new _l((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function Tl(e){var t=Cl[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function Ll(e,t){var r=Cl[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function Ul(e,t){return new _l((function(r,n){if(Cl[e.name]=Cl[e.name]||Zl(),e.db){if(!t)return r(e.db);Nl(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=yl.open.apply(yl,o);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(kl)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){r(a.result),Tl(e)}}))}function zl(e){return Ul(e,!1)}function Fl(e){return Ul(e,!0)}function Dl(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function Bl(e){return new _l((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function ql(e){return wl([Rl(atob(e.data))],{type:e.type})}function Vl(e){return e&&e.__local_forage_encoded_blob}function Wl(e){var t=this,r=t._initReady().then((function(){var e=Cl[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return Al(r,e,e),r}function Hl(e){Nl(e);for(var t=Cl[e.name],r=t.forages,n=0;n<r.length;n++){const e=r[n];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return e.db=null,zl(e).then((t=>(e.db=t,Dl(e)?Fl(e):t))).then((n=>{e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((t=>{throw Ll(e,t),t}))}function Kl(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(a){if(n>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return _l.resolve().then((()=>{if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),Fl(e)})).then((()=>Hl(e).then((function(){Kl(e,t,r,n-1)})))).catch(r);r(a)}}function Zl(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Jl(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=Cl[r.name];o||(o=Zl(),Cl[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=Wl);var a=[];function i(){return _l.resolve()}for(var s=0;s<o.forages.length;s++){var c=o.forages[s];c!==t&&a.push(c._initReady().catch(i))}var u=o.forages.slice(0);return _l.all(a).then((function(){return r.db=o.db,zl(r)})).then((function(e){return r.db=e,Dl(r,t._defaultConfig.version)?Fl(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<u.length;n++){var a=u[n];a!==t&&(a._dbInfo.db=r.db,a._dbInfo.version=r.version)}}))}function Gl(e,t){var r=this;e=jl(e);var n=new _l((function(t,n){r.ready().then((function(){Kl(r._dbInfo,xl,(function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),Vl(e)&&(e=ql(e)),t(e)},i.onerror=function(){n(i.error)}}catch(s){n(s)}}))})).catch(n)}));return Sl(n,t),n}function Xl(e,t){var r=this,n=new _l((function(t,n){r.ready().then((function(){Kl(r._dbInfo,xl,(function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName).openCursor(),s=1;i.onsuccess=function(){var r=i.result;if(r){var n=r.value;Vl(n)&&(n=ql(n));var o=e(n,r.key,s++);void 0!==o?t(o):r.continue()}else t()},i.onerror=function(){n(i.error)}}catch(c){n(c)}}))})).catch(n)}));return Sl(n,t),n}function Ql(e,t,r){var n=this;e=jl(e);var o=new _l((function(r,o){var a;n.ready().then((function(){return a=n._dbInfo,"[object Blob]"===Il.call(t)?$l(a.db).then((function(e){return e?t:Bl(t)})):t})).then((function(t){Kl(n._dbInfo,Ml,(function(a,i){if(a)return o(a);try{var s=i.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),r(t)},i.onabort=i.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(u){o(u)}}))})).catch(o)}));return Sl(o,r),o}function Yl(e,t){var r=this;e=jl(e);var n=new _l((function(t,n){r.ready().then((function(){Kl(r._dbInfo,Ml,(function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){n(i.error)},a.onabort=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(s){n(s)}}))})).catch(n)}));return Sl(n,t),n}function ef(e){var t=this,r=new _l((function(e,r){t.ready().then((function(){Kl(t._dbInfo,Ml,(function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(i){r(i)}}))})).catch(r)}));return Sl(r,e),r}function tf(e){var t=this,r=new _l((function(e,r){t.ready().then((function(){Kl(t._dbInfo,xl,(function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){r(a.error)}}catch(i){r(i)}}))})).catch(r)}));return Sl(r,e),r}function rf(e,t){var r=this,n=new _l((function(t,n){e<0?t(null):r.ready().then((function(){Kl(r._dbInfo,xl,(function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName),s=!1,c=i.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||s?t(r.key):(s=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(u){n(u)}}))})).catch(n)}));return Sl(n,t),n}function nf(e){var t=this,r=new _l((function(e,r){t.ready().then((function(){Kl(t._dbInfo,xl,(function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];a.onsuccess=function(){var t=a.result;t?(i.push(t.key),t.continue()):e(i)},a.onerror=function(){r(a.error)}}catch(s){r(s)}}))})).catch(r)}));return Sl(r,e),r}function of(e,t){t=Ol.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;if(e.name){const t=e.name===r.name&&o._dbInfo.db?_l.resolve(o._dbInfo.db):zl(e).then((t=>{const r=Cl[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t}));n=e.storeName?t.then((t=>{if(!t.objectStoreNames.contains(e.storeName))return;const r=t.version+1;Nl(e);const n=Cl[e.name],o=n.forages;t.close();for(let e=0;e<o.length;e++){const t=o[e];t._dbInfo.db=null,t._dbInfo.version=r}return new _l(((t,n)=>{const o=yl.open(e.name,r);o.onerror=e=>{o.result.close(),n(e)},o.onupgradeneeded=()=>{o.result.deleteObjectStore(e.storeName)},o.onsuccess=()=>{const e=o.result;e.close(),t(e)}})).then((e=>{n.db=e;for(let t=0;t<o.length;t++){const r=o[t];r._dbInfo.db=e,Tl(r._dbInfo)}})).catch((t=>{throw(Ll(e,t)||_l.resolve()).catch((()=>{})),t}))})):t.then((t=>{Nl(e);const r=Cl[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new _l(((t,r)=>{var n=yl.deleteDatabase(e.name);n.onerror=n.onblocked=e=>{const t=n.result;t&&t.close(),r(e)},n.onsuccess=()=>{const e=n.result;e&&e.close(),t(e)}})).then((e=>{r.db=e;for(var t=0;t<n.length;t++)Tl(n[t]._dbInfo)})).catch((t=>{throw(Ll(e,t)||_l.resolve()).catch((()=>{})),t}))}))}else n=_l.reject("Invalid arguments");return Sl(n,t),n}var af={_driver:"asyncStorage",_initStorage:Jl,_support:bl(),iterate:Xl,getItem:Gl,setItem:Ql,removeItem:Yl,clear:ef,length:tf,key:rf,keys:nf,dropInstance:of};function sf(){return"function"==typeof openDatabase}var cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uf="~~local_forage_type~",lf=/^~~local_forage_type~([^~]+)~/,ff="__lfsc__:",pf=ff.length,hf="arbf",df="blob",mf="si08",gf="ui08",vf="uic8",yf="si16",bf="si32",wf="ur16",_f="ui32",Sf="fl32",Af="fl64",jf=pf+hf.length,Of=Object.prototype.toString;function kf(e){var t,r,n,o,a,i=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var u=new ArrayBuffer(i),l=new Uint8Array(u);for(t=0;t<s;t+=4)r=cf.indexOf(e[t]),n=cf.indexOf(e[t+1]),o=cf.indexOf(e[t+2]),a=cf.indexOf(e[t+3]),l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|o>>2,l[c++]=(3&o)<<6|63&a;return u}function Ef(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=cf[r[t]>>2],n+=cf[(3&r[t])<<4|r[t+1]>>4],n+=cf[(15&r[t+1])<<2|r[t+2]>>6],n+=cf[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function Cf(e,t){var r="";if(e&&(r=Of.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===Of.call(e.buffer))){var n,o=ff;e instanceof ArrayBuffer?(n=e,o+=hf):(n=e.buffer,"[object Int8Array]"===r?o+=mf:"[object Uint8Array]"===r?o+=gf:"[object Uint8ClampedArray]"===r?o+=vf:"[object Int16Array]"===r?o+=yf:"[object Uint16Array]"===r?o+=wf:"[object Int32Array]"===r?o+=bf:"[object Uint32Array]"===r?o+=_f:"[object Float32Array]"===r?o+=Sf:"[object Float64Array]"===r?o+=Af:t(new Error("Failed to get type for BinaryArray"))),t(o+Ef(n))}else if("[object Blob]"===r){var a=new FileReader;a.onload=function(){var r=uf+e.type+"~"+Ef(this.result);t(ff+df+r)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),t(null,i)}}function If(e){if(e.substring(0,pf)!==ff)return JSON.parse(e);var t,r=e.substring(jf),n=e.substring(pf,jf);if(n===df&&lf.test(r)){var o=r.match(lf);t=o[1],r=r.substring(o[0].length)}var a=kf(r);switch(n){case hf:return a;case df:return wl([a],{type:t});case mf:return new Int8Array(a);case gf:return new Uint8Array(a);case vf:return new Uint8ClampedArray(a);case yf:return new Int16Array(a);case wf:return new Uint16Array(a);case bf:return new Int32Array(a);case _f:return new Uint32Array(a);case Sf:return new Float32Array(a);case Af:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}}var xf={serialize:Cf,deserialize:If,stringToBuffer:kf,bufferToString:Ef};function Mf(e,t,r,n){e.executeSql(`CREATE TABLE IF NOT EXISTS ${t.storeName} (id INTEGER PRIMARY KEY, key unique, value)`,[],r,n)}function Rf(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new _l((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction((function(o){Mf(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=xf,o}function Pf(e,t,r,n,o,a){e.executeSql(r,n,o,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?a(e,i):Mf(e,t,(function(){e.executeSql(r,n,o,a)}),a)}),a):a(e,i)}),a)}function $f(e,t){var r=this;e=jl(e);var n=new _l((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){Pf(r,o,`SELECT * FROM ${o.storeName} WHERE key = ? LIMIT 1`,[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return Sl(n,t),n}function Nf(e,t){var r=this,n=new _l((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){Pf(r,o,`SELECT * FROM ${o.storeName}`,[],(function(r,n){for(var a=n.rows,i=a.length,s=0;s<i;s++){var c=a.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return Sl(n,t),n}function Tf(e,t,r,n){var o=this;e=jl(e);var a=new _l((function(a,i){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?i(u):c.db.transaction((function(r){Pf(r,c,`INSERT OR REPLACE INTO ${c.storeName} (key, value) VALUES (?, ?)`,[e,t],(function(){a(s)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void a(Tf.apply(o,[e,s,r,n-1]));i(t)}}))}))})).catch(i)}));return Sl(a,r),a}function Lf(e,t,r){return Tf.apply(this,[e,t,r,1])}function Uf(e,t){var r=this;e=jl(e);var n=new _l((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){Pf(r,o,`DELETE FROM ${o.storeName} WHERE key = ?`,[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return Sl(n,t),n}function zf(e){var t=this,r=new _l((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){Pf(t,n,`DELETE FROM ${n.storeName}`,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return Sl(r,e),r}function Ff(e){var t=this,r=new _l((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){Pf(t,n,`SELECT COUNT(key) as c FROM ${n.storeName}`,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return Sl(r,e),r}function Df(e,t){var r=this,n=new _l((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){Pf(r,o,`SELECT key FROM ${o.storeName} WHERE id = ? LIMIT 1`,[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return Sl(n,t),n}function Bf(e){var t=this,r=new _l((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){Pf(t,n,`SELECT key FROM ${n.storeName}`,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return Sl(r,e),r}function qf(e){return new _l((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],a=0;a<n.rows.length;a++)o.push(n.rows.item(a).name);t({db:e,storeNames:o})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function Vf(e,t){t=Ol.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return Sl(n=e.name?new _l((function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(qf(n))})).then((function(e){return new _l((function(t,r){e.db.transaction((function(n){function o(e){return new _l((function(t,r){n.executeSql(`DROP TABLE IF EXISTS ${e}`,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var a=[],i=0,s=e.storeNames.length;i<s;i++)a.push(o(e.storeNames[i]));_l.all(a).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):_l.reject("Invalid arguments"),t),n}var Wf={_driver:"webSQLStorage",_initStorage:Rf,_support:sf(),iterate:Nf,getItem:$f,setItem:Lf,removeItem:Uf,clear:zf,length:Ff,key:Df,keys:Bf,dropInstance:Vf};function Hf(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Kf(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function Zf(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Jf(){return!Zf()||localStorage.length>0}function Gf(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Kf(e,t._defaultConfig),Jf()?(t._dbInfo=r,r.serializer=xf,_l.resolve()):_l.reject()}function Xf(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return Sl(r,e),r}function Qf(e,t){var r=this;e=jl(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return Sl(n,t),n}function Yf(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,a=localStorage.length,i=1,s=0;s<a;s++){var c=localStorage.key(s);if(0===c.indexOf(n)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),i++)))return u}}}));return Sl(n,t),n}function ep(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return Sl(n,t),n}function tp(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var a=localStorage.key(o);0===a.indexOf(e.keyPrefix)&&n.push(a.substring(e.keyPrefix.length))}return n}));return Sl(r,e),r}function rp(e){var t=this.keys().then((function(e){return e.length}));return Sl(t,e),t}function np(e,t){var r=this;e=jl(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return Sl(n,t),n}function op(e,t,r){var n=this;e=jl(e);var o=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new _l((function(o,a){var i=n._dbInfo;i.serializer.serialize(t,(function(t,n){if(n)a(n);else try{localStorage.setItem(i.keyPrefix+e,t),o(r)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||a(s),a(s)}}))}))}));return Sl(o,r),o}function ap(e,t){if(t=Ol.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return Sl(n=e.name?new _l((function(t){e.storeName?t(Kf(e,o._defaultConfig)):t(`${e.name}/`)})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):_l.reject("Invalid arguments"),t),n}var ip={_driver:"localStorageWrapper",_initStorage:Gf,_support:Hf(),iterate:Yf,getItem:Qf,setItem:op,removeItem:np,clear:Xf,length:rp,key:ep,keys:tp,dropInstance:ap};const sp=(e,t)=>e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t),cp=(e,t)=>{const r=e.length;let n=0;for(;n<r;){if(sp(e[n],t))return!0;n++}return!1},up=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},lp={},fp={},pp={INDEXEDDB:af,WEBSQL:Wf,LOCALSTORAGE:ip},hp=[pp.INDEXEDDB._driver,pp.WEBSQL._driver,pp.LOCALSTORAGE._driver],dp=["dropInstance"],mp=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(dp),gp={description:"",driver:hp.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function vp(e,t){e[t]=function(){const r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function yp(){for(let e=1;e<arguments.length;e++){const t=arguments[e];if(t)for(let e in t)t.hasOwnProperty(e)&&(up(t[e])?arguments[0][e]=t[e].slice():arguments[0][e]=t[e])}return arguments[0]}class bp{constructor(e){for(let t in pp)if(pp.hasOwnProperty(t)){const e=pp[t],r=e._driver;this[t]=r,lp[r]||this.defineDriver(e)}this._defaultConfig=yp({},gp),this._config=yp({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((()=>{}))}config(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(let t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config}defineDriver(e,t,r){const n=new _l((function(t,r){try{const n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);const a=mp.concat("_initStorage");for(let t=0,s=a.length;t<s;t++){const n=a[t];if((!cp(dp,n)||e[n])&&"function"!=typeof e[n])return void r(o)}!function(){const t=function(e){return function(){const t=new Error(`Method ${e} is not implemented by the current driver`),r=_l.reject(t);return Sl(r,arguments[arguments.length-1]),r}};for(let r=0,n=dp.length;r<n;r++){const n=dp[r];e[n]||(e[n]=t(n))}}();const i=function(r){lp[n]&&console.info(`Redefining LocalForage driver: ${n}`),lp[n]=e,fp[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(i,r):i(!!e._support):i(!0)}catch(n){r(n)}}));return Al(n,t,r),n}driver(){return this._driver||null}getDriver(e,t,r){const n=lp[e]?_l.resolve(lp[e]):_l.reject(new Error("Driver not found."));return Al(n,t,r),n}getSerializer(e){const t=_l.resolve(xf);return Al(t,e),t}ready(e){const t=this,r=t._driverSet.then((()=>(null===t._ready&&(t._ready=t._initDriver()),t._ready)));return Al(r,e,e),r}setDriver(e,t,r){const n=this;up(e)||(e=[e]);const o=this._getSupportedDrivers(e);function a(){n._config.driver=n.driver()}function i(e){return n._extend(e),a(),n._ready=n._initStorage(n._config),n._ready}function s(e){return function(){let t=0;function r(){for(;t<e.length;){let o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(i).catch(r)}a();const o=new Error("No available storage method found.");return n._driverSet=_l.reject(o),n._driverSet}return r()}}const c=null!==this._driverSet?this._driverSet.catch((()=>_l.resolve())):_l.resolve();return this._driverSet=c.then((()=>{const e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((e=>{n._driver=e._driver,a(),n._wrapLibraryMethodsWithReady(),n._initDriver=s(o)}))})).catch((()=>{a();const e=new Error("No available storage method found.");return n._driverSet=_l.reject(e),n._driverSet})),Al(this._driverSet,t,r),this._driverSet}supports(e){return!!fp[e]}_extend(e){yp(this,e)}_getSupportedDrivers(e){const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];this.supports(n)&&t.push(n)}return t}_wrapLibraryMethodsWithReady(){for(let e=0,t=mp.length;e<t;e++)vp(this,mp[e])}createInstance(e){return new bp(e)}}var wp,_p=new bp,Sp=Object.freeze({__proto__:null,default:_p}),Ap=new Uint8Array(16);function jp(){if(!wp&&!(wp="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wp(Ap)}var Op=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kp(e){return"string"==typeof e&&Op.test(e)}for(var Ep,Cp,Ip=[],xp=0;xp<256;++xp)Ip.push((xp+256).toString(16).substr(1));function Mp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(Ip[e[t+0]]+Ip[e[t+1]]+Ip[e[t+2]]+Ip[e[t+3]]+"-"+Ip[e[t+4]]+Ip[e[t+5]]+"-"+Ip[e[t+6]]+Ip[e[t+7]]+"-"+Ip[e[t+8]]+Ip[e[t+9]]+"-"+Ip[e[t+10]]+Ip[e[t+11]]+Ip[e[t+12]]+Ip[e[t+13]]+Ip[e[t+14]]+Ip[e[t+15]]).toLowerCase();if(!kp(r))throw TypeError("Stringified UUID is invalid");return r}var Rp=0,Pp=0;function $p(e,t,r){var n=t&&r||0,o=t||new Array(16),a=(e=e||{}).node||Ep,i=void 0!==e.clockseq?e.clockseq:Cp;if(null==a||null==i){var s=e.random||(e.rng||jp)();null==a&&(a=Ep=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==i&&(i=Cp=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:Pp+1,l=c-Rp+(u-Pp)/1e4;if(l<0&&void 0===e.clockseq&&(i=i+1&16383),(l<0||c>Rp)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Rp=c,Pp=u,Cp=i;var f=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;o[n++]=f>>>24&255,o[n++]=f>>>16&255,o[n++]=f>>>8&255,o[n++]=255&f;var p=c/4294967296*1e4&268435455;o[n++]=p>>>8&255,o[n++]=255&p,o[n++]=p>>>24&15|16,o[n++]=p>>>16&255,o[n++]=i>>>8|128,o[n++]=255&i;for(var h=0;h<6;++h)o[n+h]=a[h];return t||Mp(o)}function Np(e){if(!kp(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function Tp(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Lp="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Up="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function zp(e,t,r){function n(e,n,o,a){if("string"==typeof e&&(e=Tp(e)),"string"==typeof n&&(n=Np(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(n),i.set(e,n.length),(i=r(i))[6]=15&i[6]|t,i[8]=63&i[8]|128,o){a=a||0;for(var s=0;s<16;++s)o[a+s]=i[s];return o}return Mp(i)}try{n.name=e}catch(o){}return n.DNS=Lp,n.URL=Up,n}function Fp(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return Dp(qp(Vp(e),8*e.length))}function Dp(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var a=e[o>>5]>>>o%32&255,i=parseInt(n.charAt(a>>>4&15)+n.charAt(15&a),16);t.push(i)}return t}function Bp(e){return 14+(e+64>>>9<<4)+1}function qp(e,t){e[t>>5]|=128<<t%32,e[Bp(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,a=271733878,i=0;i<e.length;i+=16){var s=r,c=n,u=o,l=a;r=Zp(r,n,o,a,e[i],7,-680876936),a=Zp(a,r,n,o,e[i+1],12,-389564586),o=Zp(o,a,r,n,e[i+2],17,606105819),n=Zp(n,o,a,r,e[i+3],22,-1044525330),r=Zp(r,n,o,a,e[i+4],7,-176418897),a=Zp(a,r,n,o,e[i+5],12,1200080426),o=Zp(o,a,r,n,e[i+6],17,-1473231341),n=Zp(n,o,a,r,e[i+7],22,-45705983),r=Zp(r,n,o,a,e[i+8],7,1770035416),a=Zp(a,r,n,o,e[i+9],12,-1958414417),o=Zp(o,a,r,n,e[i+10],17,-42063),n=Zp(n,o,a,r,e[i+11],22,-1990404162),r=Zp(r,n,o,a,e[i+12],7,1804603682),a=Zp(a,r,n,o,e[i+13],12,-40341101),o=Zp(o,a,r,n,e[i+14],17,-1502002290),r=Jp(r,n=Zp(n,o,a,r,e[i+15],22,1236535329),o,a,e[i+1],5,-165796510),a=Jp(a,r,n,o,e[i+6],9,-1069501632),o=Jp(o,a,r,n,e[i+11],14,643717713),n=Jp(n,o,a,r,e[i],20,-373897302),r=Jp(r,n,o,a,e[i+5],5,-701558691),a=Jp(a,r,n,o,e[i+10],9,38016083),o=Jp(o,a,r,n,e[i+15],14,-660478335),n=Jp(n,o,a,r,e[i+4],20,-405537848),r=Jp(r,n,o,a,e[i+9],5,568446438),a=Jp(a,r,n,o,e[i+14],9,-1019803690),o=Jp(o,a,r,n,e[i+3],14,-187363961),n=Jp(n,o,a,r,e[i+8],20,1163531501),r=Jp(r,n,o,a,e[i+13],5,-1444681467),a=Jp(a,r,n,o,e[i+2],9,-51403784),o=Jp(o,a,r,n,e[i+7],14,1735328473),r=Gp(r,n=Jp(n,o,a,r,e[i+12],20,-1926607734),o,a,e[i+5],4,-378558),a=Gp(a,r,n,o,e[i+8],11,-2022574463),o=Gp(o,a,r,n,e[i+11],16,1839030562),n=Gp(n,o,a,r,e[i+14],23,-35309556),r=Gp(r,n,o,a,e[i+1],4,-1530992060),a=Gp(a,r,n,o,e[i+4],11,1272893353),o=Gp(o,a,r,n,e[i+7],16,-155497632),n=Gp(n,o,a,r,e[i+10],23,-1094730640),r=Gp(r,n,o,a,e[i+13],4,681279174),a=Gp(a,r,n,o,e[i],11,-358537222),o=Gp(o,a,r,n,e[i+3],16,-722521979),n=Gp(n,o,a,r,e[i+6],23,76029189),r=Gp(r,n,o,a,e[i+9],4,-640364487),a=Gp(a,r,n,o,e[i+12],11,-421815835),o=Gp(o,a,r,n,e[i+15],16,530742520),r=Xp(r,n=Gp(n,o,a,r,e[i+2],23,-995338651),o,a,e[i],6,-198630844),a=Xp(a,r,n,o,e[i+7],10,1126891415),o=Xp(o,a,r,n,e[i+14],15,-1416354905),n=Xp(n,o,a,r,e[i+5],21,-57434055),r=Xp(r,n,o,a,e[i+12],6,1700485571),a=Xp(a,r,n,o,e[i+3],10,-1894986606),o=Xp(o,a,r,n,e[i+10],15,-1051523),n=Xp(n,o,a,r,e[i+1],21,-2054922799),r=Xp(r,n,o,a,e[i+8],6,1873313359),a=Xp(a,r,n,o,e[i+15],10,-30611744),o=Xp(o,a,r,n,e[i+6],15,-1560198380),n=Xp(n,o,a,r,e[i+13],21,1309151649),r=Xp(r,n,o,a,e[i+4],6,-145523070),a=Xp(a,r,n,o,e[i+11],10,-1120210379),o=Xp(o,a,r,n,e[i+2],15,718787259),n=Xp(n,o,a,r,e[i+9],21,-343485551),r=Wp(r,s),n=Wp(n,c),o=Wp(o,u),a=Wp(a,l)}return[r,n,o,a]}function Vp(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(Bp(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}function Wp(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function Hp(e,t){return e<<t|e>>>32-t}function Kp(e,t,r,n,o,a){return Wp(Hp(Wp(Wp(t,e),Wp(n,a)),o),r)}function Zp(e,t,r,n,o,a,i){return Kp(t&r|~t&n,e,t,o,a,i)}function Jp(e,t,r,n,o,a,i){return Kp(t&n|r&~n,e,t,o,a,i)}function Gp(e,t,r,n,o,a,i){return Kp(t^r^n,e,t,o,a,i)}function Xp(e,t,r,n,o,a,i){return Kp(r^(t|~n),e,t,o,a,i)}var Qp=zp("v3",48,Fp);function Yp(e,t,r){var n=(e=e||{}).random||(e.rng||jp)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return Mp(n)}function eh(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function th(e,t){return e<<t|e>>>32-t}function rh(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),s=new Array(i),c=0;c<i;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[i-1][14]=8*(e.length-1)/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<i;++f){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=s[f][h];for(var d=16;d<80;++d)p[d]=th(p[d-3]^p[d-8]^p[d-14]^p[d-16],1);for(var m=r[0],g=r[1],v=r[2],y=r[3],b=r[4],w=0;w<80;++w){var _=Math.floor(w/20),S=th(m,5)+eh(_,g,v,y)+b+t[_]+p[w]>>>0;b=y,y=v,v=th(g,30)>>>0,g=m,m=S}r[0]=r[0]+m>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var nh=zp("v5",80,rh),oh="00000000-0000-0000-0000-000000000000";function ah(e){if(!kp(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var ih=Object.freeze({__proto__:null,v1:$p,v3:Qp,v4:Yp,v5:nh,NIL:oh,version:ah,validate:kp,stringify:Mp,parse:Np}),sh=h(Sp),ch=h(ih);const uh=sh.default||sh,{v4:lh}=ch,fh="urn:uuid:";class ph extends gl{_setup(){this.has.mappings={read:!0,create:!0,update:!0,delete:!0},this.queue=[],this.localStorageKey="cocoda-mappings--"+this._path;let e="mappings",t=()=>uh.getItem(this.localStorageKey).then((e=>{e=e||[];let t=0;for(let r of e.filter((e=>!e.uri||!e.uri.startsWith(fh))))r.uri&&(r.identifier||(r.identifier=[]),r.identifier.push(r.uri)),r.uri=`${fh}${lh()}`,t+=1;return t&&console.warn(`URIs added to ${t} local mappings.`),uh.setItem(this.localStorageKey,e)}));uh.getItem(e).then((t=>{t&&console.warn(`Warning: There is old data in local storage (or IndexedDB, depending on the ) with the key "${e}". This data will not be used anymore. A manual export is necessary to get this data back.`)})),this.queue.push(t().catch((e=>{console.warn("Error when adding URIs to local mappings:",e)})))}isAuthorizedFor({type:e,action:t}){return"mappings"==e&&"anonymous"!=t}_getMappingsQueue(){let e=tu.last(this.queue)||Promise.resolve();return new Promise((t=>{function r(){var e,t,r=new Promise(((r,n)=>{e=r,t=n}));return r.resolve=e,r.reject=t,r}let n=r(),o=()=>{n.resolve()};this.queue.push(n),e.then((()=>uh.getItem(this.localStorageKey))).then((e=>{t({mappings:e,done:o})}))}))}async getMapping(e){var{mapping:t}=e,r=i(e,["mapping"]);if(r._raw=!0,!t||!t.uri)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});return(await this.getMappings(a(a({},r),{uri:t.uri})))[0]}async getMappings({from:e,fromScheme:t,to:r,toScheme:n,creator:o,type:a,partOf:i,offset:s,limit:c,direction:u,mode:l,identifier:p,uri:h}={}){let d={};return e&&(d.from=tu.isString(e)?e:e.uri),t&&(d.fromScheme=tu.isString(t)?{uri:t}:t),r&&(d.to=tu.isString(r)?r:r.uri),n&&(d.toScheme=tu.isString(n)?{uri:n}:n),o&&(d.creator=tu.isString(o)?o:m.prefLabel(o)),a&&(d.type=tu.isString(a)?a:a.uri),i&&(d.partOf=tu.isString(i)?i:i.uri),s&&(d.offset=s),c&&(d.limit=c),u&&(d.direction=u),l&&(d.mode=l),p&&(d.identifier=p),h&&(d.uri=h),this._getMappingsQueue().catch((e=>{throw new f.CDKError({message:"Could not get mappings from local storage",relatedError:e})})).then((({mappings:e,done:t})=>{t();let r=(e,t)=>e.uri==t||t&&e.notation&&e.notation[0].toLowerCase()==t.toLowerCase();if((d.from||d.to)&&(e=e.filter((e=>{let t=null!=m.conceptsOfMapping(e,"from").find((e=>r(e,d.from))),n=null!=m.conceptsOfMapping(e,"to").find((e=>r(e,d.from))),o=null!=m.conceptsOfMapping(e,"from").find((e=>r(e,d.to))),a=null!=m.conceptsOfMapping(e,"to").find((e=>r(e,d.to)));return"backward"==d.direction?"or"==d.mode?d.from&&n||d.to&&o:(!d.from||n)&&(!d.to||o):"both"==d.direction?"or"==d.mode?d.from&&(t||n)||d.to&&(o||a):(!d.from||t)&&(!d.to||a)||(!d.from||n)&&(!d.to||o):"or"==d.mode?d.from&&t||d.to&&a:(!d.from||t)&&(!d.to||a)}))),(d.fromScheme||d.toScheme)&&(e=e.filter((e=>{let t=m.compare(e.fromScheme,d.fromScheme),r=m.compare(e.toScheme,d.fromScheme),n=m.compare(e.fromScheme,d.toScheme),o=m.compare(e.toScheme,d.toScheme);return"backward"==d.direction?"or"==d.mode?d.fromScheme&&r||d.toScheme&&n:(!d.fromScheme||r)&&(!d.toScheme||n):"both"==d.direction?"or"==d.mode?d.fromScheme&&(t||r)||d.toScheme&&(n||o):(!d.fromScheme||t)&&(!d.toScheme||o)||(!d.fromScheme||r)&&(!d.toScheme||n):"or"==d.mode?d.fromScheme&&t||d.toScheme&&o:(!d.fromScheme||t)&&(!d.toScheme||o)}))),d.creator){let t=d.creator.split("|");e=e.filter((e=>null!=(e.creator&&e.creator.find((e=>t.includes(m.prefLabel(e))||t.includes(e.uri))))))}d.type&&(e=e.filter((e=>(e.type||[m.defaultMappingType.uri]).includes(d.type)))),d.partOf&&(e=e.filter((e=>null!=e.partOf&&null!=e.partOf.find((e=>m.compare(e,{uri:d.partOf})))))),d.identifier&&(e=e.filter((e=>d.identifier.split("|").map((t=>(e.identifier||[]).includes(t)||e.uri==t)).reduce(((e,t)=>e||t))))),d.uri&&(e=e.filter((e=>e.uri==d.uri)));let n=e.length;return(e=(e=(e=e.sort(((e,t)=>{let r=e.modified||e.created,n=t.modified||t.created;return null==n?-1:null==r?1:r>n?-1:1}))).slice(d.offset||0)).slice(0,d.limit))._totalCount=n,e}))}async postMapping({mapping:e}){if(!e)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});let{mappings:t,done:r}=await this._getMappingsQueue();if(e.uri&&e.uri.startsWith(fh)||(e.uri&&(e.identifier||(e.identifier=[]),e.identifier.push(e.uri)),e.uri=`${fh}${lh()}`),t.find((t=>t.uri==e.uri)))throw r(),new f.InvalidOrMissingParameterError({parameter:"mapping",message:"Duplicate URI"});e.created||(e.created=(new Date).toISOString()),e.modified||(e.modified=e.created),t.push(e),t=t.map((e=>m.minifyMapping(e)));try{return await uh.setItem(this.localStorageKey,t),r(),e}catch(n){throw r(),n}}async putMapping({mapping:e}){if(!e)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});let{mappings:t,done:r}=await this._getMappingsQueue();const n=t.findIndex((t=>t.uri==e.uri));if(-1==n)throw r(),new f.InvalidOrMissingParameterError({parameter:"mapping",message:"Mapping not found"});e.created||(e.created=t[n].created),e.modified=(new Date).toISOString(),t[n]=e,t=t.map((e=>m.minifyMapping(e)));try{return await uh.setItem(this.localStorageKey,t),r(),e}catch(o){throw r(),o}}async patchMapping({mapping:e}){if(!e)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});let{mappings:t,done:r}=await this._getMappingsQueue();const n=t.findIndex((t=>t.uri==e.uri));if(-1==n)throw r(),new f.InvalidOrMissingParameterError({parameter:"mapping",message:"Mapping not found"});e.created||(e.created=t[n].created),e.modified=(new Date).toISOString(),t[n]=Object.assign(t[n],e),t=t.map((e=>m.minifyMapping(e)));try{return await uh.setItem(this.localStorageKey,t),r(),e}catch(o){throw r(),o}}async deleteMapping({mapping:e}){if(!e)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});let{mappings:t,done:r}=await this._getMappingsQueue();try{return t=t.filter((t=>t.uri!=e.uri)),t=t.map((e=>m.minifyMapping(e))),await uh.setItem(this.localStorageKey,t),r(),!0}catch(n){throw r(),n}}}ph.providerName="LocalMappings",ph.stored=!0;var hh=ph;class dh extends gl{_prepare(){this._api.api&&void 0===this._api.status&&(this._api.status=dl.concatUrl(this._api.api,"/status"))}_setup(){if(this._api.api){const e={mappings:"/mappings",concordances:"/concordances",annotations:"/annotations"};for(let t of Object.keys(e))void 0===this._api[t]&&(this._api[t]=dl.concatUrl(this._api.api,e[t]))}this.has.mappings=!!this._api.mappings&&{},this.has.mappings&&(this.has.mappings.read=!!tu.get(this._config,"mappings.read",!0),this.has.mappings.create=!!tu.get(this._config,"mappings.create"),this.has.mappings.update=!!tu.get(this._config,"mappings.update"),this.has.mappings.delete=!!tu.get(this._config,"mappings.delete"),this.has.mappings.anonymous=!!tu.get(this._config,"mappings.anonymous")),this.has.concordances=!!this._api.concordances,this.has.annotations=!!this._api.annotations&&{},this.has.annotations&&(this.has.annotations.read=!!tu.get(this._config,"annotations.read"),this.has.annotations.create=!!tu.get(this._config,"annotations.create"),this.has.annotations.update=!!tu.get(this._config,"annotations.update"),this.has.annotations.delete=!!tu.get(this._config,"annotations.delete")),this.has.auth=null!=tu.get(this._config,"auth.key"),this._defaultParams={properties:"annotations"}}async getMapping(e){var{mapping:t}=e,r=i(e,["mapping"]);if(!t)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});if(!t.uri||!t.uri.startsWith(this._api.mappings))throw new f.InvalidOrMissingParameterError({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});try{return await this.axios(a(a({},r),{url:t.uri,params:a(a({},this._defaultParams),r.params||{})}))}catch(n){if(404==tu.get(n,"response.status"))return null;throw n}}async getMappings(e){var{from:t,fromScheme:r,to:n,toScheme:o,creator:s,type:c,partOf:u,offset:l,limit:f,direction:p,mode:h,identifier:d,sort:g,order:v}=e,y=i(e,["from","fromScheme","to","toScheme","creator","type","partOf","offset","limit","direction","mode","identifier","sort","order"]);let b={},w=this._api.mappings;return t&&(b.from=tu.isString(t)?t:t.uri),r&&(b.fromScheme=tu.isString(r)?r:r.uri),n&&(b.to=tu.isString(n)?n:n.uri),o&&(b.toScheme=tu.isString(o)?o:o.uri),s&&(b.creator=tu.isString(s)?s:m.prefLabel(s)),c&&(b.type=tu.isString(c)?c:c.uri),u&&(b.partOf=tu.isString(u)?u:u.uri),l&&(b.offset=l),f&&(b.limit=f),p&&(b.direction=p),h&&(b.mode=h),d&&(b.identifier=d),g&&(b.sort=g),v&&(b.order=v),this.axios(a(a({},y),{method:"get",url:w,params:a(a(a({},this._defaultParams),y.params||{}),b)}))}async postMapping(e){var{mapping:t}=e,r=i(e,["mapping"]);if(!t)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});return t=m.minifyMapping(t),t=m.addMappingIdentifiers(t),this.axios(a(a({},r),{method:"post",url:this._api.mappings,data:t,params:a(a({},this._defaultParams),r.params||{})}))}async putMapping(e){var{mapping:t}=e,r=i(e,["mapping"]);if(!t)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});t=m.minifyMapping(t);const n=(t=m.addMappingIdentifiers(t)).uri;if(!n||!n.startsWith(this._api.mappings))throw new f.InvalidOrMissingParameterError({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});return this.axios(a(a({},r),{method:"put",url:n,data:t,params:a(a({},this._defaultParams),r.params||{})}))}async patchMapping(e){var{mapping:t}=e,r=i(e,["mapping"]);if(!t)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});t=m.minifyMapping(t);const n=(t=m.addMappingIdentifiers(t)).uri;if(!n||!n.startsWith(this._api.mappings))throw new f.InvalidOrMissingParameterError({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});return this.axios(a(a({},r),{method:"patch",url:n,data:t,params:a(a({},this._defaultParams),r.params||{})}))}async deleteMapping(e){var{mapping:t}=e,r=i(e,["mapping"]);if(!t)throw new f.InvalidOrMissingParameterError({parameter:"mapping"});const n=t.uri;if(!n||!n.startsWith(this._api.mappings))throw new f.InvalidOrMissingParameterError({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});return await this.axios(a(a({},r),{method:"delete",url:n})),!0}async getAnnotations(e){var{target:t}=e,r=i(e,["target"]);return t&&tu.set(r,"params.target",t),this.axios(a(a({},r),{method:"get",url:this._api.annotations}))}async postAnnotation(e){var{annotation:t}=e,r=i(e,["annotation"]);return this.axios(a(a({},r),{method:"post",url:this._api.annotations,data:t}))}async putAnnotation(e){var{annotation:t}=e,r=i(e,["annotation"]);const n=t.id;if(!n||!n.startsWith(this._api.annotations))throw new f.InvalidOrMissingParameterError({parameter:"annotation",message:"URI doesn't seem to be part of this registry."});return this.axios(a(a({},r),{method:"put",url:n,data:t}))}async patchAnnotation(e){var{annotation:t}=e,r=i(e,["annotation"]);const n=t.id;if(!n||!n.startsWith(this._api.annotations))throw new f.InvalidOrMissingParameterError({parameter:"annotation",message:"URI doesn't seem to be part of this registry."});return this.axios(a(a({},r),{method:"patch",url:n,data:t}))}async deleteAnnotation(e){var{annotation:t}=e,r=i(e,["annotation"]);const n=t.id;if(!n||!n.startsWith(this._api.annotations))throw new f.InvalidOrMissingParameterError({parameter:"annotation",message:"URI doesn't seem to be part of this registry."});return await this.axios(a(a({},r),{method:"delete",url:n})),!0}async getConcordances(e){return this.axios(a(a({},e),{method:"get",url:this._api.concordances}))}}dh.providerName="MappingsApi",dh.stored=!0;var mh=dh;class gh extends gl{_setup(){this._cache=[],this._occurrencesSupportedSchemes=[],this.has.occurrences=!0,this.has.mappings=!0}async _occurrencesIsSupported(e){if(this._occurrencesSupportedSchemes&&this._occurrencesSupportedSchemes.length);else try{const e=dl.concatUrl(this._api.api,"voc"),t=await this.axios({method:"get",url:e});this._occurrencesSupportedSchemes=t||[]}catch(r){}let t=!1;for(let n of this._occurrencesSupportedSchemes)m.compare(e,n)&&(t=!0);return t}async getMappings(e){const t=await this.getOccurrences(e),r=tu.get(e,"from.inScheme[0]")||e.fromScheme,n=tu.get(e,"to.inScheme[0]")||e.toScheme,o=[];for(let a of t){if(!a)continue;let e={};e.from=tu.get(a,"memberSet[0]"),e.from?e.from={memberSet:[e.from]}:e.from=null,e.fromScheme=tu.get(a,"memberSet[0].inScheme[0]"),e.to=tu.get(a,"memberSet[1]"),e.to?e.to={memberSet:[e.to]}:e.to={memberSet:[]},e.toScheme=tu.get(a,"memberSet[1].inScheme[0]"),(r&&e.fromScheme&&!m.compare(e.fromScheme,r)||n&&e.toScheme&&!m.compare(e.toScheme,n))&&([e.from,e.fromScheme,e.to,e.toScheme]=[e.to,e.toScheme,e.from,e.fromScheme]),!e.fromScheme&&r&&(e.fromScheme=r),!e.toScheme&&n&&(e.toScheme=n),e.type=[m.defaultMappingType.uri],e._occurrence=a,e=m.addMappingIdentifiers(e),a.database&&(e.creator=[a.database]),o.push(e)}return o}async getOccurrences(e){var{from:t,to:r,concepts:n}=e,o=i(e,["from","to","concepts"]);let s=[];n=(n||[]).concat([t,r]).filter((e=>!!e));for(let a of n)s.push(this._occurrencesIsSupported(tu.get(a,"inScheme[0]")).then((e=>e&&a.uri?a.uri:null)));let c=await Promise.all(s);if(c=c.filter((e=>null!=e)),0==c.length)throw new f.InvalidOrMissingParameterError({parameter:"concepts"});s=[];for(let i of c)s.push(this._getOccurrences(a(a({},o),{params:{member:i,scheme:"*",threshold:5}})));if(c.length>1){let e=c.join(" ");s.push(this._getOccurrences(a(a({},o),{params:{member:e,threshold:5}})))}const u=await Promise.all(s);let l=tu.concat([],...u),p=[],h=[];for(let a=0;a<l.length;a+=1){let e=l[a];if(!e)continue;let t=e.memberSet.reduce(((e,t)=>e.concat(t.uri)),[]).sort().join(" ");p.includes(t)?h.push(a):p.push(t)}return h.forEach((e=>{delete l[e]})),l=l.filter((e=>null!=e)),l.sort(((e,t)=>parseInt(t.count||0)-parseInt(e.count||0)))}async _getOccurrences(e){let t=this._cache.find((t=>tu.isEqual(t.config.params,e.params)));if(t)return t.data;const r=await this.axios(a(a({},e),{method:"get",url:this._api.api}));return this._cache.push({config:e,data:r}),this._cache.length>20&&(this._cache=this._cache.slice(this._cache.length-20)),r}}gh.providerName="OccurrencesApi",gh.stored=!1;var vh=gh;class yh extends gl{_prepare(){this._api.api&&void 0===this._api.status&&(this._api.status=dl.concatUrl(this._api.api,"/status"))}_setup(){if(this._api.api){const e={schemes:"/voc",top:"/voc/top",concepts:"/voc/concepts",data:"/data",narrower:"/narrower",ancestors:"/ancestors",types:"/types",suggest:"/suggest",search:"/search"};for(let t of Object.keys(e))void 0===this._api[t]&&(this._api[t]=dl.concatUrl(this._api.api,e[t]))}this.has.schemes=!!this._api.schemes,this.has.top=!!this._api.top,this.has.data=!!this._api.data,this.has.concepts=!!this._api.concepts||this.has.data,this.has.narrower=!!this._api.narrower,this.has.ancestors=!!this._api.ancestors,this.has.types=!!this._api.types,this.has.suggest=!!this._api.suggest,this.has.search=!!this._api.search,this.has.auth=null!=tu.get(this._config,"auth.key"),this._defaultParams={properties:"uri,prefLabel,notation,inScheme"}}async getSchemes(e){if(!this._api.schemes)throw new f.MissingApiUrlError;if(Array.isArray(this._api.schemes))return this._api.schemes;const t=await this.axios(a(a({},e),{method:"get",url:this._api.schemes,params:a(a(a({},this._defaultParams),{limit:500}),e.params||{})}));return Array.isArray(this._jskos.schemes)?dl.withCustomProps(t.filter((e=>m.isContainedIn(e,this._jskos.schemes))),t):t}async getTop(e){var{scheme:t}=e,r=i(e,["scheme"]);if(!this._api.top)throw new f.MissingApiUrlError;if(!t)throw new f.InvalidOrMissingParameterError({parameter:"scheme"});return Array.isArray(this._api.top)?this._api.top:this.axios(a(a({},r),{method:"get",url:this._api.top,params:a(a(a(a({},this._defaultParams),{limit:1e4}),r.params||{}),{uri:t.uri})}))}async getConcepts(e){var{concepts:t}=e,r=i(e,["concepts"]);if(!this.has.data)throw new f.MissingApiUrlError;if(!t)throw new f.InvalidOrMissingParameterError({parameter:"concepts"});Array.isArray(t)||(t=[t]);let n=t.map((e=>e.uri)).filter((e=>null!=e));return this.axios(a(a({},r),{method:"get",url:this._api.data,params:a(a(a(a({},this._defaultParams),{limit:500}),r.params||{}),{uri:n.join("|")})}))}async getNarrower(e){var{concept:t}=e,r=i(e,["concept"]);if(!this._api.narrower)throw new f.MissingApiUrlError;if(!t||!t.uri)throw new f.InvalidOrMissingParameterError({parameter:"concept"});return this.axios(a(a({},r),{method:"get",url:this._api.narrower,params:a(a(a(a({},this._defaultParams),{limit:1e4}),r.params||{}),{uri:t.uri})}))}async getAncestors(e){var{concept:t}=e,r=i(e,["concept"]);if(!this._api.ancestors)throw new f.MissingApiUrlError;if(!t||!t.uri)throw new f.InvalidOrMissingParameterError({parameter:"concept"});return this.axios(a(a({},r),{method:"get",url:this._api.ancestors,params:a(a(a(a({},this._defaultParams),{limit:1e4}),r.params||{}),{uri:t.uri})}))}async suggest(e){var{scheme:t,use:r="notation,label",types:n=[],sort:o="score"}=e,s=i(e,["scheme","use","types","sort"]);return this._search(a(a({},s),{endpoint:"suggest",params:a(a({},s.params),{voc:tu.get(t,"uri",""),type:n.join("|"),use:r,sort:o})}))}async search(e){var{scheme:t,types:r=[]}=e,n=i(e,["scheme","types"]);return this._search(a(a({},n),{endpoint:"search",params:a(a({},n.params),{voc:tu.get(t,"uri",""),type:r.join("|")})}))}async vocSuggest(e){var{use:t="notation,label",sort:r="score"}=e,n=i(e,["use","sort"]);return this._search(a(a({},n),{endpoint:"voc-suggest",params:a(a({},n.params),{use:t,sort:r})}))}async vocSearch(e){return this._search(a(a({},e),{endpoint:"voc-search"}))}async _search(e){var{endpoint:t,search:r,limit:n,offset:o,params:s}=e,c=i(e,["endpoint","search","limit","offset","params"]);let u=this._api[t];if(!u)throw new f.MissingApiUrlError;if(!r)throw new f.InvalidOrMissingParameterError({parameter:"search"});return n=n||this._jskos.suggestResultLimit||100,o=o||0,u=u.replace("{searchTerms}",r),this.axios(a(a({},c),{params:a(a(a({},this._defaultParams),s),{limit:n,count:n,offset:o,search:r,query:r}),method:"get",url:u}))}async getTypes(e){var{scheme:t}=e,r=i(e,["scheme"]);if(!this._api.types)throw new f.MissingApiUrlError;return Array.isArray(this._api.types)?this._api.types:(t&&t.uri&&tu.set(r,"params.uri",t.uri),this.axios(a(a({},r),{method:"get",url:this._api.types})))}}yh.providerName="ConceptApi";var bh=yh;class wh extends gl{_setup(){this.has.mappings=!0,this._cache=[]}async getMappings(e){var{from:t,to:r,mode:n}=e,o=i(e,["from","to","mode"]);let s,c,u=[];tu.isArray(this.schemes)&&(u=this.schemes);let l,p,h=tu.get(t,"inScheme[0]"),d=tu.get(r,"inScheme[0]");if(!t||m.isContainedIn(h,u)?(s=!0,c=r,l=d,p=u.find((e=>m.compare(e,h)))||u[0]):(s=!1,c=t,l=h,p=u.find((e=>m.compare(e,d)))||u[0]),"or"!=n)return[];if(!this._api.api)throw new f.MissingApiUrlError;if(!c)throw new f.InvalidOrMissingParameterError({parameter:s?"to":"from"});let g=m.languagePreference.selectLanguage(c.prefLabel);if(!g)throw new f.InvalidOrMissingParameterError({parameter:s?"to":"from",message:"Missing language"});let v=tu.get(c,`altLabel.${g}`,[]);tu.isString(v)&&(v=[v]);let y=tu.get(c,`prefLabel.${g}`),b=v.concat([y]);b=[y];let{url:w,data:_}=await this._getReconciliationResults(a(a({},o),{labels:b,language:g}));_=[].concat(...Object.values(_).map((e=>e.result))).filter((e=>e)),_=_.sort(((e,t)=>e.score!=t.score?t.score-e.score:e.match!=t.match?e.match?-1:1:e.id.length-t.id.length));let S=tu.get(p,"namespace",""),A=_.map((e=>({fromScheme:l,from:{memberSet:[c]},toScheme:p,to:{memberSet:[{uri:S+e.id}]},type:[e.match?"http://www.w3.org/2004/02/skos/core#exactMatch":e.score>=80?"http://www.w3.org/2004/02/skos/core#closeMatch":"http://www.w3.org/2004/02/skos/core#mappingRelation"]})));return s&&(A=A.map((e=>Object.assign(e,{fromScheme:e.toScheme,from:e.to,toScheme:e.fromScheme,to:e.from})))),A._url=w,A}async _getReconciliationResults(e){var{labels:t,language:r}=e,n=i(e,["labels","language"]);t=t.sort();let o=this._cache.find((e=>tu.isEqual(e.labels,t)&&e.language==r));if(o)return o;let s={},c=0;for(let a of t)s[`q${c}`]={query:a},c+=1;let u=this._api.api;r&&(u=u.replace("{language}",r));const l=`queries=${encodeURIComponent(JSON.stringify(s))}`;tu.set(n,["headers","Content-Type"],"application/x-www-form-urlencoded");let f=await this.axios(a(a({},n),{method:"post",url:u,data:l}));f=f||{};let p={labels:t,language:r,data:f,url:`${u}${u.includes("?")?"&":"?"}${l}`};return this._cache.push(p),this._cache.length>20&&(this._cache=this._cache.slice(this._cache.length-20)),p}}wh.providerName="ReconciliationApi",wh.stored=!1;var _h=wh;class Sh extends gl{_setup(){this._cache=[],this.has.mappings=!0}setRegistries(e){this._registries=e}get _searchUris(){const e={};for(let t of this._registries){const r=tu.get(t,"_api.search")||tu.get(t,"_jskos.search")||t.search;r&&tu.isString(r)&&(e[t.uri]=r)}return e}supportsScheme(e){let t=tu.get(e,"_registry.uri");return super.supportsScheme(e)&&null!=t&&this._searchUris&&this._searchUris[t]}async getMappings(e){var{from:t,to:r,mode:n,selected:o,limit:s=10}=e,c=i(e,["from","to","mode","selected","limit"]);if("or"!=n)return[];if(!this._searchUris)throw new f.MissingApiUrlError({message:"No registries available to search"});if(!o)throw new f.InvalidOrMissingParameterError({parameter:"selected"});let u=[];t&&this.supportsScheme(o.scheme[!1])?u.push(this._getMappings(a(a({},c),{concept:t,sourceScheme:o.scheme[!0],targetScheme:o.scheme[!1],limit:s}))):u.push(Promise.resolve([])),r&&this.supportsScheme(o.scheme[!0])?u.push(this._getMappings(a(a({},c),{concept:r,sourceScheme:o.scheme[!1],targetScheme:o.scheme[!0],limit:s,swap:!0}))):u.push(Promise.resolve([]));let[l,p]=await Promise.all(u);for(p=p.filter((e=>!l.find((t=>m.compareMappingMembers(e,t)))));l.length+p.length>s;)p.length>=l.length?p=p.slice(0,-1):l=l.slice(0,-1);return tu.union(l,p)}async _getMappings(e){var{concept:t,sourceScheme:r,targetScheme:n,limit:o,swap:s=!1}=e,c=i(e,["concept","sourceScheme","targetScheme","limit","swap"]);if(!t||!r||!n)return[];if(m.compare(r,n))return[];let u=m.prefLabel(t,{fallbackToUri:!1,language:this.languages[0]||this._defaultLanguages[0]});if(!u)return[];let l=(await this._getResults(a(a({},c),{label:u,targetScheme:n,limit:o}))).map((e=>({fromScheme:r,from:{memberSet:[t]},toScheme:n,to:{memberSet:[e]},type:["http://www.w3.org/2004/02/skos/core#mappingRelation"]})));return s&&(l=l.map((e=>Object.assign(e,{fromScheme:e.toScheme,from:e.to,toScheme:e.fromScheme,to:e.from})))),l}async _getResults(e){var{label:t,targetScheme:r,limit:n}=e,o=i(e,["label","targetScheme","limit"]);let s=(this._cache[r.uri]||{})[t];if(s&&s._limit>=n)return s;const c=tu.get(r,"_registry.uri"),u=null!=c&&this._searchUris&&this._searchUris[c];if(!u)return[];const l=await this.axios(a(a({},o),{method:"get",url:u,params:{query:t,limit:n,voc:r.uri}}));return this._cache[r.uri]||(this._cache[r.uri]={}),this._cache[r.uri][t]=l,this._cache[r.uri][t]._limit=n,l}}Sh.providerName="LabelSearchSuggestion",Sh.stored=!1;var Ah=Sh;class jh extends gl{_setup(){this.has.schemes=!0,this.has.top=!1,this.has.data=!0,this.has.concepts=!0,this.has.narrower=!0,this.has.ancestors=!0,this.has.types=!0,this.has.suggest=!0,this.has.search=!0;for(let e of this.schemes)e.concepts=[null],e.topConcepts=[]}_getApiUrl(e,t,r){if(!e||!e.VOCID)throw new f.InvalidOrMissingParameterError({parameter:"scheme",message:"Missing scheme or VOCID property on scheme"});t=t||"",(r=r||{}).lang||(r.lang=this.languages[0]||"en");const n=Object.keys(r).map((e=>`${e}=${encodeURIComponent(r[e])}`)).join("&");return`${this._api.api}${e.VOCID}${t}${n?"?"+n:""}`}_getDataUrl(e,{addFormatParameter:t=!0}={}){const r=tu.get(e,"inScheme[0]");if(!e||!e.uri)throw new f.InvalidOrMissingParameterError({parameter:"concept",message:"Missing concept URI"});return this._getApiUrl(r,"/data",t?{format:"application/json"}:{})}_toJskosConcept(e,{concept:t,scheme:r,result:n,language:o}={}){if(!e)return null;t=m.deepCopy(t||{}),o=o||e.lang||"en",t.uri=e.uri,r&&(t.inScheme=[r]);let a=e.matchedPrefLabel||e.prefLabel||e.label;if(tu.isString(a))tu.set(t,`prefLabel.${o}`,a);else{a&&!tu.isArray(a)&&(a=[a]);for(let e of a||[])tu.set(t,`prefLabel.${e.lang}`,e.value)}let i=e.altLabel;if(tu.isString(i))tu.set(t,`altLabel.${o}`,[i]);else{i&&!tu.isArray(i)&&(i=[i]);for(let e of i||[])tu.get(t,`altLabel.${e.lang}`)?(t.altLabel[e.lang].push(e.value),t.altLabel[e.lang]=tu.uniq(t.altLabel[e.lang])):tu.set(t,`altLabel.${e.lang}`,[e.value])}const s=e.notation||e["skos:notation"]||m.notation(t);s&&(t.notation=[s.value||s]),e.broader&&(tu.isArray(e.broader)||(e.broader=[e.broader]),t.broader=e.broader.map((e=>tu.isString(e)?{uri:e}:e))),!0===e.hasChildren?t.narrower=[null]:!1===e.hasChildren&&(t.narrower=[]),e.type&&!tu.isArray(e.type)&&(e.type=[e.type]),t.type=t.type||[];for(let c of e.type||[]){if(!m.isValidUri(c))continue;const e=c.slice(0,c.indexOf(":"));n&&n["@context"]&&n["@context"][e]&&(c=c.replace(e+":",n["@context"][e])),t.type.push(c)}return t.type=tu.uniq(t.type),t.type.length||(t.type=["http://www.w3.org/2004/02/skos/core#Concept"]),t}async getSchemes(e){var t=i(e,[]);if(!this._jskos.loadSchemeInfo)return this.schemes.map((e=>m.deepCopy(e)));const r=[],n=this.languages[0]||"en";for(let o of this.schemes||[]){const e=this._getApiUrl(o,"/",{lang:n}),i=(await this.axios(a(a({},t),{method:"get",url:e}))).conceptschemes.find((e=>m.compare(e,o))),s=i&&(i.prefLabel||i.label||i.title);s&&tu.set(o,`prefLabel.${n}`,s),r.push(o)}return r}async getTop(e){var{scheme:t}=e,r=i(e,["scheme"]);const n=this._getApiUrl(t,"/topConcepts"),o=this.languages[0]||"en";tu.set(r,"params.lang",o),tu.set(r,"params.scheme",t.uri);const s=await this.axios(a(a({},r),{method:"get",url:n})),c=[];for(let a of s.topconcepts||[]){const e=this._toJskosConcept(a,{scheme:t,language:o});e.topConceptOf=[t],c.push(e)}return c}async getConcepts(e){var{concepts:t}=e,r=i(e,["concepts"]);tu.isArray(t)||(t=[t]),t=t.map((e=>({uri:e.uri,inScheme:e.inScheme})));const n=[];for(let o of t){const e=this._getDataUrl(o,{addFormatParameter:!1});if(!e)continue;const t=await this.axios(a(a({},r),{method:"get",url:e,params:{uri:o.uri,format:"application/json"}})),i=t&&t.graph&&t.graph.find((e=>m.compare(e,o)));if(i){const e=this._toJskosConcept(i,{concept:o,result:t});for(let r of["broader","narrower"]){let n=i[r]||e[r];n&&!tu.isArray(n)&&(n=[n]),n||(n=[]),e[r]=n.map((e=>this._toJskosConcept(t.graph.find((t=>m.compare(t,e))),{scheme:o.inScheme[0],result:t})))}e.ancestors=[],n.push(e)}}return n}async getNarrower(e){var{concept:t}=e,r=i(e,["concept"]);if(!t||!t.uri)throw new f.InvalidOrMissingParameterError({parameter:"concept"});const n=t.inScheme[0],o=this._getApiUrl(n,"/children");return tu.set(r,"params.uri",t.uri),((await this.axios(a(a({},r),{method:"get",url:o}))).narrower||[]).map((e=>this._toJskosConcept(e,{scheme:n})))}async getAncestors(e){var{concept:t}=e,r=i(e,["concept"]);if(!t||!t.uri)throw new f.InvalidOrMissingParameterError({parameter:"concept"});const n=t.inScheme[0],o=this._getApiUrl(n,"/broaderTransitive");tu.set(r,"params.uri",t.uri);const s=await this.axios(a(a({},r),{method:"get",url:o}));let c=[],u=t.uri;for(;u;)u!=t.uri&&(c=[tu.get(s,`broaderTransitive["${u}"]`)].concat(c)),u=tu.get(s,`broaderTransitive["${u}"].broader[0]`);return c.map((e=>this._toJskosConcept(e,{scheme:n}))).filter((e=>e.uri!=t.uri))}async suggest(e){e._raw=!0;const t=await this.search(e),r=[e.search,[],[],[]];for(let n of t){const e=m.notation(n),t=m.prefLabel(n);r[1].push((e?e+" ":"")+t),r[2].push(""),r[3].push(n.uri)}return null!=t._totalCount?r._totalCount=t._totalCount:r._totalCount=t.length,r}async search(e){var{search:t,scheme:r,limit:n,types:o=[]}=e,s=i(e,["search","scheme","limit","types"]);const c=this._getApiUrl(r,"/search");return tu.set(s,"params.query",`${t}*`),tu.set(s,"params.unique",1),tu.set(s,"params.maxhits",n||100),tu.set(s,"params.type",o.join(" ")),((await this.axios(a(a({},s),{method:"get",url:c}))).results||[]).map((e=>this._toJskosConcept(e,{scheme:r})))}async getTypes(e){var{scheme:t}=e,r=i(e,["scheme"]);const n=this._getApiUrl(t,"/types"),o=[],s=await this.axios(a(a({},r),{method:"get",url:n}));for(let a of s&&s.types||[])"http://www.w3.org/2004/02/skos/core#Concept"!=a.uri&&(a.label&&(a.prefLabel={[s["@context"]["@language"]]:a.label},delete a.label),o.push(a));return o._url=n,o}}jh.providerName="SkosmosApi";var Oh=jh;let kh={[gl.providerName]:gl,init(e){if(this[e.provider])return new this[e.provider](e);throw new f.InvalidProviderError},addProvider(e){if(!(e.prototype instanceof kh[gl.providerName]))throw new f.InvalidProviderError;this[e.providerName]=e}};for(let a of[hh,mh,vh,bh,_h,Ah,Oh])kh.addProvider(a);var Eh=kh;class Ch{constructor(e){this.config=e,this.axios=fl.create()}setConfig(e){this.config=e}get config(){return this._config}set config(e){(e=e||{}).registries=e.registries||[],e.registries=e.registries.map((e=>Eh.init(e))).filter((e=>e));for(let t of e.registries.filter((e=>e.setRegistries)))t.setRegistries(e.registries);this._config=e}createInstance(e){return new Ch(e)}async loadConfig(e){const t=await this.axios.get(e);this.config=t.data}loadBuildInfo(e){var{url:t,buildInfo:r=null,interval:n=6e4,callback:o}=e,s=i(e,["url","buildInfo","interval","callback"]);if(!t&&!this.config.cocodaBaseUrl)throw new f.CDKError({message:"Could not determine URL to load build config."});return t||(t=`${this.config.cocodaBaseUrl}build-info.json`),this.repeat(a(a({},s),{function:async()=>(await this.axios.get(t,{headers:{"Cache-Control":"no-cache"}})).data,interval:n,callback:(e,t,n)=>{e?o(e):(n||!n&&r&&!tu.isEqual(t,r))&&o(null,t,n||r)}}))}getRegistryForUri(e){return this.config.registries.find((t=>t.uri==e))}initializeRegistry(e){return Eh.init(e)}addProvider(e){Eh.addProvider(e)}repeat({function:e,interval:t=15e3,callback:r,callImmediately:n=!0}={}){if(!e)throw new f.InvalidOrMissingParameterError({parameter:"function"});if("function"!=typeof e)throw new f.InvalidOrMissingParameterError({parameter:"function",message:"function needs to be a function"});const o=async()=>e();if(t=parseInt(t),isNaN(t))throw new f.InvalidOrMissingParameterError({parameter:"interval"});if(!r)throw new f.InvalidOrMissingParameterError({parameter:"callback"});if("function"!=typeof r)throw new f.InvalidOrMissingParameterError({parameter:"callback",message:"callback needs to be a function"});let a={timer:null,result:null,error:null,isPaused:!1};const i=e=>{const t=a.result;tu.isEqual(t,e)||(a.result=e,a.error=null,r(null,e,t))},s=e=>{a.error=e,r(e)},c=e=>{a.isPaused||(a.timer=setTimeout((()=>{e()}),t))},u=()=>o().then(i).catch(s).then((()=>c(u))),l=(e=n)=>{e?u():c(u)};return l(),{start:(...e)=>{a.isPaused=!1,l(...e)},stop:()=>{a.isPaused=!0,a.timer?clearTimeout(a.timer):setTimeout((()=>{a.timer&&clearTimeout(a.timer)}),t)},get isPaused(){return a.isPaused},get lastResult(){return a.result},get hasErrored(){return!!a.error}}}async getSchemes(e={}){let t=[],r=[];for(let n of this.config.registries)if(n.has.schemes){let o=n.getSchemes(e).then((e=>{for(let r of e){r.__DETAILSLOADED__=1,r.type=r.type||["http://www.w3.org/2004/02/skos/core#ConceptScheme"];let e,o,a=t.find((e=>m.compare(e,r))),i=!1;if(a){e=this.config.registries.indexOf(n),-1!=e&&(e=this.config.registries.length-e),o=this.config.registries.indexOf(tu.get(a,"_registry")),-1!=o&&(o=this.config.registries.length-o);let t=r.concepts?0==r.concepts.length?-1:1:0,s=a.concepts?0==a.concepts.length?-1:1:0;i=t>s||!(t<s)&&o<e}if(!a||i){if(i){let e=t.findIndex((e=>m.compare(e,a)));-1!=e&&t.splice(e,1),r=m.merge(r,a,{mergeUris:!0,skipPaths:["_registry"]})}r._registry=n,t.push(r)}else{let e=t.findIndex((e=>m.compare(e,r)));if(-1!=e){let n=t[e]._registry;t[e]=m.merge(t[e],tu.omit(r,["concepts","topConcepts"]),{mergeUris:!0,skipPaths:["_registry"]}),t[e]._registry=n}}}})).catch((e=>{console.warn("Couldn't load schemes for registry",n.uri,e)}));r.push(o)}return Promise.all(r).then((()=>{for(let e of t)e.concepts&&0==e.concepts.length&&delete e.concepts,e.topConcepts&&0==e.topConcepts.length&&delete e.topConcepts;return t=t.filter((e=>null!=e)),t=m.sortSchemes(t),t}))}}return new Ch}()})).initializeRegistry({provider:"ConceptApi",status:"https://coli-conc.gbv.de/api/status"}),Me={uri:"http://dewey.info/scheme/edition/e23/",prefLabel:{de:"Dewey-Dezimalklassifikation"},notation:["DDC"],identifier:["http://bartoc.org/en/node/241"],type:["http://www.w3.org/2004/02/skos/core#ConceptScheme"],_registry:xe},Re=F(null);let Pe;Re.subscribe((async e=>{if(null!==e&&!K.compare(e,Pe)){if(Pe=e,!e.ancestors||null===e.ancestors[0])try{const t=await xe.getAncestors({concept:e});Re.update((r=>(K.compare(e,r)&&(r.ancestors=t),r)))}catch(t){console.warn("Could not load ancestors for",e.uri)}if(!e.narrower||null===e.narrower[0])try{const t=await xe.getNarrower({concept:e});Re.update((r=>(K.compare(e,r)&&(r.narrower=t),r)))}catch(t){console.warn("Could not load narrower for",e.uri)}if(!e.__DETAILSLOADED__)try{const[t]=await xe.getConcepts({concepts:[e]});Re.update((e=>{if(K.compare(e,t)){for(const r in t)e[r]||(e[r]=t[r]);e.__DETAILSLOADED__=1}return e}))}catch(t){console.warn("Could not load details for",e.uri)}const r=new URLSearchParams(window.location.search);r.set("uri",e.uri);const n=`${window.location.href.replace(window.location.search,"")}?${r.toString()}`;window.history.replaceState({},"",n)}}));function $e(e,t,r){const n=e.slice();return n[3]=t[r],n}function Ne(e,t,r){const n=e.slice();return n[6]=t[r],n}function Te(e){let t,r;return{c(){t=l("p"),r=b("No concept given.")},l(e){t=f(e,"P",{});var n=p(t);r=w(n,"No concept given."),n.forEach(h)},m(e,n){g(e,t,n),v(t,r)},p:y,i:y,o:y,d(e){e&&h(t)}}}function Le(e){let t,r,n,o,a,i,s,c,u,d=e[0].uri+"",m=e[0].ancestors&&e[0].ancestors.length&&Ue(e);n=new Q({props:{item:e[0]}});let y=e[0].narrower&&e[0].narrower.length&&Be(e);return{c(){m&&m.c(),t=S(),r=l("p"),$(n.$$.fragment),o=S(),a=l("p"),i=b(d),s=S(),y&&y.c(),c=U()},l(e){m&&m.l(e),t=A(e),r=f(e,"P",{});var u=p(r);N(n.$$.fragment,u),u.forEach(h),o=A(e),a=f(e,"P",{});var l=p(a);i=w(l,d),l.forEach(h),s=A(e),y&&y.l(e),c=U()},m(e,l){m&&m.m(e,l),g(e,t,l),g(e,r,l),T(n,r,null),g(e,o,l),g(e,a,l),v(a,i),g(e,s,l),y&&y.m(e,l),g(e,c,l),u=!0},p(e,r){e[0].ancestors&&e[0].ancestors.length?m?(m.p(e,r),1&r&&x(m,1)):(m=Ue(e),m.c(),x(m,1),m.m(t.parentNode,t)):m&&(E(),C(m,1,1,(()=>{m=null})),I());const o={};1&r&&(o.item=e[0]),n.$set(o),(!u||1&r)&&d!==(d=e[0].uri+"")&&_(i,d),e[0].narrower&&e[0].narrower.length?y?(y.p(e,r),1&r&&x(y,1)):(y=Be(e),y.c(),x(y,1),y.m(c.parentNode,c)):y&&(E(),C(y,1,1,(()=>{y=null})),I())},i(e){u||(x(m),x(n.$$.fragment,e),x(y),u=!0)},o(e){C(m),C(n.$$.fragment,e),C(y),u=!1},d(e){m&&m.d(e),e&&h(t),e&&h(r),L(n),e&&h(o),e&&h(a),e&&h(s),y&&y.d(e),e&&h(c)}}}function Ue(e){let t,r,n,o;const a=[Fe,ze],i=[];function s(e,t){return 1===e[0].ancestors.length&&null===e[0].ancestors[0]?0:1}return t=s(e),r=i[t]=a[t](e),{c(){r.c(),n=U()},l(e){r.l(e),n=U()},m(e,r){i[t].m(e,r),g(e,n,r),o=!0},p(e,o){let c=t;t=s(e),t===c?i[t].p(e,o):(E(),C(i[c],1,1,(()=>{i[c]=null})),I(),r=i[t],r?r.p(e,o):(r=i[t]=a[t](e),r.c()),x(r,1),r.m(n.parentNode,n))},i(e){o||(x(r),o=!0)},o(e){C(r),o=!1},d(e){i[t].d(e),e&&h(n)}}}function ze(e){let t,r,n=e[0].ancestors,o=[];for(let i=0;i<n.length;i+=1)o[i]=De(Ne(e,n,i));const a=e=>C(o[e],1,1,(()=>{o[e]=null}));return{c(){t=l("ul");for(let e=0;e<o.length;e+=1)o[e].c();this.h()},l(e){t=f(e,"UL",{class:!0});var r=p(t);for(let t=0;t<o.length;t+=1)o[t].l(r);r.forEach(h),this.h()},h(){d(t,"class","ancestors svelte-1az2doa")},m(e,n){g(e,t,n);for(let r=0;r<o.length;r+=1)o[r].m(t,null);r=!0},p(e,r){if(1&r){let i;for(n=e[0].ancestors,i=0;i<n.length;i+=1){const a=Ne(e,n,i);o[i]?(o[i].p(a,r),x(o[i],1)):(o[i]=De(a),o[i].c(),x(o[i],1),o[i].m(t,null))}for(E(),i=n.length;i<o.length;i+=1)a(i);I()}},i(e){if(!r){for(let e=0;e<n.length;e+=1)x(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)C(o[t]);r=!1},d(e){e&&h(t),z(o,e)}}}function Fe(e){let t,r;return t=new V({props:{size:"20"}}),{c(){$(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,n){T(t,e,n),r=!0},p:y,i(e){r||(x(t.$$.fragment,e),r=!0)},o(e){C(t.$$.fragment,e),r=!1},d(e){L(t,e)}}}function De(e){let t,r,n,o,a;return n=new Q({props:{item:e[6],isLink:!0}}),n.$on("click",(function(){return e[1](e[6])})),{c(){t=l("li"),r=b("⬑\n              "),$(n.$$.fragment),o=S()},l(e){t=f(e,"LI",{});var a=p(t);r=w(a,"⬑\n              "),N(n.$$.fragment,a),o=A(a),a.forEach(h)},m(e,i){g(e,t,i),v(t,r),T(n,t,null),v(t,o),a=!0},p(t,r){e=t;const o={};1&r&&(o.item=e[6]),n.$set(o)},i(e){a||(x(n.$$.fragment,e),a=!0)},o(e){C(n.$$.fragment,e),a=!1},d(e){e&&h(t),L(n)}}}function Be(e){let t,r,n,o;const a=[Ve,qe],i=[];function s(e,t){return 1===e[0].narrower.length&&null===e[0].narrower[0]?0:1}return t=s(e),r=i[t]=a[t](e),{c(){r.c(),n=U()},l(e){r.l(e),n=U()},m(e,r){i[t].m(e,r),g(e,n,r),o=!0},p(e,o){let c=t;t=s(e),t===c?i[t].p(e,o):(E(),C(i[c],1,1,(()=>{i[c]=null})),I(),r=i[t],r?r.p(e,o):(r=i[t]=a[t](e),r.c()),x(r,1),r.m(n.parentNode,n))},i(e){o||(x(r),o=!0)},o(e){C(r),o=!1},d(e){i[t].d(e),e&&h(n)}}}function qe(e){let t,r,n=e[0].narrower,o=[];for(let i=0;i<n.length;i+=1)o[i]=We($e(e,n,i));const a=e=>C(o[e],1,1,(()=>{o[e]=null}));return{c(){t=l("ul");for(let e=0;e<o.length;e+=1)o[e].c();this.h()},l(e){t=f(e,"UL",{class:!0});var r=p(t);for(let t=0;t<o.length;t+=1)o[t].l(r);r.forEach(h),this.h()},h(){d(t,"class","narrower svelte-1az2doa")},m(e,n){g(e,t,n);for(let r=0;r<o.length;r+=1)o[r].m(t,null);r=!0},p(e,r){if(1&r){let i;for(n=e[0].narrower,i=0;i<n.length;i+=1){const a=$e(e,n,i);o[i]?(o[i].p(a,r),x(o[i],1)):(o[i]=We(a),o[i].c(),x(o[i],1),o[i].m(t,null))}for(E(),i=n.length;i<o.length;i+=1)a(i);I()}},i(e){if(!r){for(let e=0;e<n.length;e+=1)x(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)C(o[t]);r=!1},d(e){e&&h(t),z(o,e)}}}function Ve(e){let t,r;return t=new V({props:{size:"20"}}),{c(){$(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,n){T(t,e,n),r=!0},p:y,i(e){r||(x(t.$$.fragment,e),r=!0)},o(e){C(t.$$.fragment,e),r=!1},d(e){L(t,e)}}}function We(e){let t,r,n,o,a;return n=new Q({props:{item:e[3],isLink:!0}}),n.$on("click",(function(){return e[2](e[3])})),{c(){t=l("li"),r=b("⬐\n              "),$(n.$$.fragment),o=S()},l(e){t=f(e,"LI",{});var a=p(t);r=w(a,"⬐\n              "),N(n.$$.fragment,a),o=A(a),a.forEach(h)},m(e,i){g(e,t,i),v(t,r),T(n,t,null),v(t,o),a=!0},p(t,r){e=t;const o={};1&r&&(o.item=e[3]),n.$set(o)},i(e){a||(x(n.$$.fragment,e),a=!0)},o(e){C(n.$$.fragment,e),a=!1},d(e){e&&h(t),L(n)}}}function He(e){let t,r,n,o;const a=[Le,Te],i=[];function s(e,t){return e[0]?0:1}return r=s(e),n=i[r]=a[r](e),{c(){t=l("div"),n.c(),this.h()},l(e){t=f(e,"DIV",{class:!0});var r=p(t);n.l(r),r.forEach(h),this.h()},h(){d(t,"class","concept-details svelte-1az2doa")},m(e,n){g(e,t,n),i[r].m(t,null),o=!0},p(e,[o]){let c=r;r=s(e),r===c?i[r].p(e,o):(E(),C(i[c],1,1,(()=>{i[c]=null})),I(),n=i[r],n?n.p(e,o):(n=i[r]=a[r](e),n.c()),x(n,1),n.m(t,null))},i(e){o||(x(n),o=!0)},o(e){C(n),o=!1},d(e){e&&h(t),i[r].d()}}}function Ke(e,t,r){let{concept:n}=t;return e.$$set=e=>{"concept"in e&&r(0,n=e.concept)},[n,e=>{Re.set(e)},e=>{Re.set(e)}]}class Ze extends s{constructor(e){super(),c(this,e,Ke,He,u,{concept:0})}}function Je(e,t,r){const n=e.slice();return n[8]=t[r],n}function Ge(e,t,r){const n=e.slice();return n[11]=t[r],n}function Xe(e){let t,r,n,o;function a(){return e[4](e[11])}return{c(){t=l("button"),r=b(e[11])},l(n){t=f(n,"BUTTON",{});var o=p(t);r=w(o,e[11]),o.forEach(h)},m(e,i){g(e,t,i),v(t,r),n||(o=O(t,"click",a),n=!0)},p(t,r){e=t},d(e){e&&h(t),n=!1,o()}}}function Qe(e){let t,r,n;return r=new Q({props:{item:e[8],isLink:!0}}),r.$on("click",(function(){return e[6](e[8])})),{c(){t=l("div"),$(r.$$.fragment)},l(e){t=f(e,"DIV",{});var n=p(t);N(r.$$.fragment,n),n.forEach(h)},m(e,o){g(e,t,o),T(r,t,null),n=!0},p(t,n){e=t;const o={};1&n&&(o.item=e[8]),r.$set(o)},i(e){n||(x(r.$$.fragment,e),n=!0)},o(e){C(r.$$.fragment,e),n=!1},d(e){e&&h(t),L(r)}}}function Ye(e){let t,r,n,o,a,i,s,c,u,m,y,_,j,k,M,R,P,U,F,D;i=new se({props:{scheme:Me}}),i.$on("select",e[3]),u=new Ze({props:{concept:e[1]}});let B=[1e3,1e4,1e5],q=[];for(let l=0;l<3;l+=1)q[l]=Xe(Ge(e,B,l));let V=e[0],W=[];for(let l=0;l<V.length;l+=1)W[l]=Qe(Je(e,V,l));const H=e=>C(W[e],1,1,(()=>{W[e]=null}));return{c(){t=l("main"),r=l("h1"),n=b("Cocoda Test Svelte"),o=S(),a=l("section"),$(i.$$.fragment),s=S(),c=l("section"),$(u.$$.fragment),m=S(),y=l("section"),_=l("p"),j=b("Generate elements:\n\t\t\t");for(let e=0;e<3;e+=1)q[e].c();k=S(),M=l("button"),R=b("Clear"),P=S();for(let e=0;e<W.length;e+=1)W[e].c();this.h()},l(e){t=f(e,"MAIN",{class:!0});var l=p(t);r=f(l,"H1",{});var d=p(r);n=w(d,"Cocoda Test Svelte"),d.forEach(h),o=A(l),a=f(l,"SECTION",{class:!0});var g=p(a);N(i.$$.fragment,g),g.forEach(h),s=A(l),c=f(l,"SECTION",{class:!0});var v=p(c);N(u.$$.fragment,v),v.forEach(h),m=A(l),y=f(l,"SECTION",{class:!0});var b=p(y);_=f(b,"P",{});var S=p(_);j=w(S,"Generate elements:\n\t\t\t");for(let t=0;t<3;t+=1)q[t].l(S);k=A(S),M=f(S,"BUTTON",{});var O=p(M);R=w(O,"Clear"),O.forEach(h),S.forEach(h),P=A(b);for(let t=0;t<W.length;t+=1)W[t].l(b);b.forEach(h),l.forEach(h),this.h()},h(){d(a,"class","svelte-jslb3l"),d(c,"class","svelte-jslb3l"),d(y,"class","svelte-jslb3l"),d(t,"class","svelte-jslb3l")},m(l,f){g(l,t,f),v(t,r),v(r,n),v(t,o),v(t,a),T(i,a,null),v(t,s),v(t,c),T(u,c,null),v(t,m),v(t,y),v(y,_),v(_,j);for(let e=0;e<3;e+=1)q[e].m(_,null);v(_,k),v(_,M),v(M,R),v(y,P);for(let e=0;e<W.length;e+=1)W[e].m(y,null);U=!0,F||(D=O(M,"click",e[5]),F=!0)},p(e,[t]){const r={};if(2&t&&(r.concept=e[1]),u.$set(r),4&t){let r;for(B=[1e3,1e4,1e5],r=0;r<3;r+=1){const n=Ge(e,B,r);q[r]?q[r].p(n,t):(q[r]=Xe(n),q[r].c(),q[r].m(_,k))}for(;r<3;r+=1)q[r].d(1)}if(1&t){let r;for(V=e[0],r=0;r<V.length;r+=1){const n=Je(e,V,r);W[r]?(W[r].p(n,t),x(W[r],1)):(W[r]=Qe(n),W[r].c(),x(W[r],1),W[r].m(y,null))}for(E(),r=V.length;r<W.length;r+=1)H(r);I()}},i(e){if(!U){x(i.$$.fragment,e),x(u.$$.fragment,e);for(let e=0;e<V.length;e+=1)x(W[e]);U=!0}},o(e){C(i.$$.fragment,e),C(u.$$.fragment,e),W=W.filter(Boolean);for(let t=0;t<W.length;t+=1)C(W[t]);U=!1},d(e){e&&h(t),L(i),L(u),z(q,e),z(W,e),F=!1,D()}}}function et(e,t,r){let n;D(e,Re,(e=>r(1,n=e)));var o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};let a=[];function i(e){return o(this,void 0,void 0,(function*(){r(0,a=Array.from(Array(e).keys()).map((e=>({uri:`uri:test:${e}`,notation:[`${e}`],prefLabel:{en:`Concept #${e}`}}))))}))}{const e=new URLSearchParams(window.location.search).get("uri");e&&function(e,t){!t&&e.startsWith("http://dewey.info/class/")&&(t=Me);const r={uri:e,scheme:t};Re.set(r)}(e)}return[a,n,i,e=>{Re.set(e.detail)},e=>i(e),()=>i(0),e=>{Re.set(e)}]}export default class extends s{constructor(e){super(),c(this,e,et,Ye,u,{})}}
